"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[89329],{442368:(e,n,r)=>{r.d(n,{kY:()=>u,Aj:()=>d,d$:()=>f,S1:()=>E,hw:()=>h,kU:()=>p});var t=r(744564),i=r(20170),o=r(761953);function a(e,n,r,t,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?n(s):Promise.resolve(s).then(t,i)}function l(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var o=e.apply(n,r);function l(e){a(o,t,i,l,s,"next",e)}function s(e){a(o,t,i,l,s,"throw",e)}l(void 0)}))}}var s=function(e,n){var r,t,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(i=2&o[0]?t.return:o[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,o[1])).done)return i;(t=0,
i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;t=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=n.call(e,a)}catch(e){o=[6,e];t=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function u(e,n,r,t){return c.apply(this,arguments)}function c(){return(c=l((function(e,n,r,o){var a;return s(this,(function(l){switch(l.label){case 0:return null==(a=e.getGuildId())||n!==a?[3,2]:[4,(0,i.u)(e,o,r)];case 1:if(!l.sent())return[2,!1];l.label=2;case 2:t.Z.dispatch({type:"CHANNEL_SETTINGS_PERMISSIONS_UPDATE_PERMISSION",id:n,allow:r,deny:o});return[2]}}))}))).apply(this,arguments)}
function d(e){t.Z.dispatch({type:"CHANNEL_SETTINGS_PERMISSIONS_SELECT_PERMISSION",id:e})}function f(e){t.Z.dispatch({type:"CHANNEL_SETTINGS_PERMISSIONS_SET_ADVANCED_MODE",advancedMode:e})}function E(){t.Z.dispatch({type:"CHANNEL_SETTINGS_PERMISSIONS_INIT"})}function h(e,n,r){return p(e,n,[],r)}function p(e,n,r,i){t.Z.dispatch({type:"CHANNEL_SETTINGS_PERMISSIONS_SUBMITTING"});return new Promise((function(t){var i=function(){if(0===n.length&&0===r.length)return t();if(n.length>0){var a=n.pop();if(null==a)return i();o.Z.updatePermissionOverwrite(e,a).then(i,i)}else{var l=r.pop();if(null==l)return i();o.Z.clearPermissionOverwrite(e,l).then(i,i)}};i()})).then((function(){t.Z.dispatch({type:"CHANNEL_SETTINGS_PERMISSIONS_SAVE_SUCCESS",silent:i})}))}},1477:(e,n,r)=>{r.d(n,{GJ:()=>y,X0:()=>g,W:()=>b,aq:()=>N,pM:()=>R,ik:()=>M,Wx:()=>A,kA:()=>_,RZ:()=>w,iI:()=>P,cR:()=>Z,zB:()=>j,yv:()=>D,_A:()=>k,$e:()=>H,Yh:()=>B,Yk:()=>G,RD:()=>z,nT:()=>V,$7:()=>U,Tj:()=>q})
;var t=r(940060),i=r(547308),o=r(442368),a=r(73904),l=r(382060),s=r(21372),u=r(473903),c=r(176758),d=r(72580),f=r(563135),E=r(749565),h=r(449518),p=r(2590),S=r(473708);function v(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function y(e){return t.Z.has(e.permissions,p.Plq.ADMINISTRATOR)}function m(e){return t.Z.has(e.permissions,p.Plq.ADMINISTRATOR)?h.aC.ADMINISTRATOR:h.aC.ROLE}function g(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=m(e);return{rowType:t,colorString:null!==(n=e.colorString)&&void 0!==n?n:(0,i.Rf)(p.p6O),name:e.name,id:e.id,disabled:y(e)||r,key:"".concat(t,":").concat(e.id),tags:e.tags}}function b(e,n){var r=y(e)?0:1,t=y(n)?0:1;return r!==t?r-t:n.position-e.position}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_NO_ROLES;return[{rowType:h.aC.EMPTY_STATE,colorString:(0,i.Rf)(p.p6O),name:e,disabled:!0,
id:"EMPTY_STATE"}]}function T(e,n,r,i){var o=u.default.getCurrentUser();if(null==o)return!1;if(null==e)return o.id!==n;var a=e.permissionOverwrites[n];null!=(null==i?void 0:i[n])&&(a=i[n]);return null==a||!t.Z.has(a.allow,r)}function R(e,n){return e===n}function O(e,n){return!R(e.id,n.id)}function M(e,n,r){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0};return null==e.roles?[]:Object.values(e.roles).filter((function(i){return!y(i)&&T(n,i.id,r)&&O(e,i)&&t(i.name)})).sort(b).map((function(e){return g(e)}))}function A(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0};return null==e.roles?[]:Object.values(e.roles).filter((function(t){return!y(t)&&T(n,t.id,r)&&O(e,t)&&i(t.name)})).sort(b).map((function(e){return g(e,t.Z.has(e.permissions,r))}))}function _(e,n,r,t){var i=[];if(null==e.roles)return i;i=function(e,n,r,t){return Object.values(e.roles).filter((function(i){return y(i)||!T(n,i.id,r,t)&&O(e,i)}))
}(e,n,r,t).sort(b).map((function(e){return g(e)}));return 0===i.length?N(S.Z.Messages.CHANNEL_PERMISSIONS_NO_ROLES):i}function w(e,n,r,i){var o=[];if(null==e.roles)return o;o=function(e,n,r,i){return Object.values(e.roles).filter((function(o){var a;return y(o)||!T(n,o.id,r,i)&&O(e,o)||t.Z.has(t.Z.combine(o.permissions,null===(a=n.permissionOverwrites[o.id])||void 0===a?void 0:a.allow),r)}))}(e,n,r,i).sort(b).map((function(e){return g(e,t.Z.has(e.permissions,r))}));return 0===o.length?N(S.Z.Messages.CHANNEL_PERMISSIONS_NO_ROLES):o}function I(e,n){var r;return null!==(r=s.ZP.getNick(n.id,e.id))&&void 0!==r?r:E.ZP.getName(e)}function C(e,n){return n.isOwner(e)}function x(e,n){var r=function(e,n){return n.isOwner(e)?h.aC.OWNER:h.aC.MEMBER}(e,n);return{rowType:r,name:I(e,n),userTag:E.ZP.getUserTag(e,{decoration:"never"}),id:e.id,avatarURL:e.getAvatarURL(n.id,24),bot:e.bot,verifiedBot:e.isVerifiedBot(),disabled:C(e,n),key:"".concat(r,":").concat(e.id)}}function L(e,n){
return e.rowType!==n.rowType?e.rowType-n.rowType:e.name.toLocaleLowerCase().localeCompare(n.name.toLocaleLowerCase())}function P(e,n,r,t){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!0};return e.map(u.default.getUser).filter(d.lm).filter((function(e){return!r.isOwner(e)&&T(n,e.id,t)&&(i(I(e,r))||i(e.username)||i(e.discriminator))})).map((function(e){return x(e,r)})).sort(L)}function Z(e,n,r,t,i){return function(e,n,r,t,i){return e.map(u.default.getUser).filter(d.lm).filter((function(e){return!T(n,e.id,t,i)||C(e,r)}))}(e,n,r,t,i).map((function(e){return x(e,r)})).sort(L)}function j(e,n){switch(e){case h.aC.ROLE:return S.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_ROW_ROLE;case h.aC.OWNER:return S.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_ROW_OWNER;case h.aC.ADMINISTRATOR:return S.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_ROW_ADMINISTRATOR;case h.aC.MEMBER:return n?S.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_ROW_MEMBER:null
;case h.aC.EMPTY_STATE:return null}}function D(e){switch(e){case h.aC.ROLE:return S.Z.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TOOLTIP;case h.aC.OWNER:return S.Z.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TOOLTIP_OWNER;case h.aC.ADMINISTRATOR:return S.Z.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TOOLTIP_ADMINISTRATOR;case h.aC.MEMBER:return S.Z.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TOOLTIP;case h.aC.EMPTY_STATE:default:return null}}function k(e,n,r){var i=e.permissionOverwrites[e.guild_id];null==i&&(i=f.ZP.makeEveryoneOverwrite(e.guild_id));var o=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){v(e,n,r[n])}))}return e}({},i);o.deny=t.Z.remove(o.deny,n);o.allow=t.Z.remove(o.allow,n);r||(o.deny=t.Z.add(o.deny,n));return o}function H(e,n,r){
var t=k(e,n,r);(0,o.kY)(e,t.id,t.allow,t.deny)}function B(e,n){var r=u.default.getCurrentUser();if(null!=r){var i=e.permissionOverwrites[r.id];if(null==i){var l={id:r.id,type:a.BN.MEMBER,allow:t.Z.add(f.ZP.NONE,n),deny:f.ZP.NONE};(0,o.hw)(e.id,[l],!0)}else{var s=i.allow,c=i.deny;s=t.Z.add(s,n);(0,o.kY)(e,i.id,s,c)}}}function G(e,n){if(null==e)return!1;var r=e.permissionOverwrites[e.guild_id];null!=(null==n?void 0:n[e.guild_id])&&(r=n[e.guild_id]);return null!=r&&t.Z.has(r.deny,e.accessPermissions)}function z(e){var n=Object.keys(e.roles);return 0!==n.length&&(1!==n.length||n[0]!==e.id)}function V(e,n,r){return e===p.d4z.GUILD_TEXT||e===p.d4z.GUILD_ANNOUNCEMENT?n:!(0,l.bw)(e)&&e!==p.d4z.GUILD_CATEGORY||n&&r}function U(e){switch(e){case p.d4z.GUILD_TEXT:case p.d4z.GUILD_ANNOUNCEMENT:return S.Z.Messages.PRIVATE_TEXT_CHANNEL_CREATION_PERMISSION_MISSING_HINT.format();case p.d4z.GUILD_VOICE:return S.Z.Messages.PRIVATE_VOICE_CHANNEL_CREATION_PERMISSION_MISSING_HINT.format()
;case p.d4z.GUILD_CATEGORY:return S.Z.Messages.PRIVATE_CATEGORY_CREATION_PERMISSION_MISSING_HINT.format();default:return null}}function q(e,n){var r=[];Object.values(e).forEach((function(e){var t=e.row;null!=t.id&&""!==t.id&&(t.rowType===h.aC.ROLE?r.push((0,c.rX)(t.id,n)):t.rowType===h.aC.MEMBER&&r.push((0,c.jZ)(t.id,n)))}));return r}},689329:(e,n,r)=>{r.r(n);r.d(n,{AddMembersBody:()=>ee,MemberRoleSelector:()=>ne,default:()=>re,getFullRowId:()=>$});var t=r(785893),i=r(667294),o=r(294184),a=r.n(o),l=r(457217),s=r(202351),u=r(707961),c=r(442368),d=r(650332),f=r(407737),E=r(382060),h=r(61209),p=r(21372),S=r(567403),v=r(793461),y=r(609853),m=r(107364),g=r(443812),b=r(823975),N=r(855595),T=r(787554),R=r(652591),O=r(176758),M=r(607556),A=r(968696),_=r(1477),w=r(489670),I=r.n(w);const C=i.forwardRef((function(e,n){
var r=e.query,i=e.onQueryChange,o=e.onRemoveTag,a=e.onSelect,l=e.onSelectionChange,s=e.selectedSection,u=e.selectedRow,c=e.tags,f=e.sections,E=e.placeholder,h=void 0===E?"":E,p=e.focusAfterReady,S=e.isReady,v=e["aria-labelledby"],y=e["aria-controls"];return(0,t.jsx)(d.ZP,{autoFocus:!0,className:I().searchBar,maxHeight:100,onQueryChange:i,onRemoveTag:o,selectedSection:s,selectedRow:u,onSelect:a,onSelectionChange:l,placeholder:0===c.length?h:"",query:r,ref:n,size:d.ZP.Sizes.MEDIUM,tags:c,sections:f,focusAfterReady:p,isReady:S,inputProps:{"aria-labelledby":v,"aria-controls":y,"aria-expanded":!0,"aria-activedescendant":"user-row-".concat(u)}})}));var x=r(449518),L=r(2590),P=r(473708),Z=r(923062),j=r.n(Z);function D(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function k(e,n,r,t,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?n(s):Promise.resolve(s).then(t,i)}function H(e){return function(){var n=this,r=arguments
;return new Promise((function(t,i){var o=e.apply(n,r);function a(e){k(o,t,i,a,l,"next",e)}function l(e){k(o,t,i,a,l,"throw",e)}a(void 0)}))}}function B(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function G(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){B(e,n,r[n])}))}return e}function z(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));r.push.apply(r,t)}return r}(Object(n)).forEach((function(r){
Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}));return e}function V(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++){r=o[t];n.indexOf(r)>=0||(i[r]=e[r])}return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++){r=o[t];n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}}return i}function U(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,o=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(t=r.next()).done);a=!0){o.push(t.value);if(n&&o.length===n)break}}catch(e){l=!0;i=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return D(e,n);var r=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e){var n=function(e,n){if("object"!==Y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,n||"default");if("object"!==Y(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===Y(n)?n:String(n)}var Y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var W=function(e,n){var r,t,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){
return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(i=2&o[0]?t.return:o[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,o[1])).done)return i;(t=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;t=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=n.call(e,a)}catch(e){o=[6,e];t=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},F=(0,g.hQ)(),X=(0,g.hQ)();function $(e){return"".concat(e.rowType,":").concat(e.id)}function Q(e){return(0,t.jsx)(u.vwX,{tag:"h5",
className:a()(j().sectionTitle,j().rowHeight),children:e},e)}function J(e,n){return n?e.slice(1):e}function K(e){var n=e.id,r=e.children,i=e.rowLabel,o=e.checked,s=e.onSelect,c=e.disabled,d=e.showCheckbox,f=e.selected,E=e.onMouseEnter,h=e["aria-posinset"],p=e["aria-setsize"],S=(0,l.JA)(n);return(0,t.jsx)(u.P3F,z(G({},S),{id:n,className:a()(j().addMemberRow,B({},j().selectedRow,f)),onClick:function(e){if(!c){e.preventDefault();s()}},onMouseEnter:E,role:"option","aria-disabled":c,"aria-selected":o,"aria-setsize":p,"aria-posinset":h,children:(0,t.jsxs)(m.Z,{justify:m.Z.Justify.BETWEEN,align:m.Z.Align.CENTER,children:[d?(0,t.jsx)(u.XZJ,{displayOnly:!0,size:18,value:o,type:u.XZJ.Types.INVERTED,children:(0,t.jsx)("div",{className:j().checkboxLabel,children:r})}):r,null!=i?(0,t.jsx)(u.xvT,{color:"text-muted",variant:"text-xs/normal",children:i}):null]})}))}function ee(e){
var n,r=e.guild,o=e.channel,a=e.permission,l=e.pendingAdditions,u=e.setPendingAdditions,c=e.isStageChannel,f=void 0===c?null!=o&&o.isGuildStageVoice():c,E=e.description,h=function(e){var n=J(g.trim(),v);return new RegExp("".concat(A.Z.escape(n)),"i").test(e)},S=U(i.useState(!1),2),v=S[0],y=S[1],m=U(i.useState(""),2),g=m[0],b=m[1],N=(0,s.e7)([p.ZP],(function(){return p.ZP.getMemberIds(r.id)}));v?n=[]:f?n=_.Wx(r,o,a,h):0===(n=_.ik(r,o,a,h)).length&&(""!==g.trim()||_.RD(r)||(n=_.aq()));var T=_.iI(N,o,r,a,h),R={placeholderText:P.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_PLACEHOLDER,hintText:P.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_SUBTITLE,renderEmptyText:function(e){return P.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_NO_RESULT.format({query:e})}},O=R.placeholderText,w=R.hintText,I=R.renderEmptyText;return(0,t.jsx)(ne,{pendingAdditions:l,query:g,onQueryChange:function(e){var n=e.trim(),t="@"===n.charAt(0);M.Z.requestMembers(r.id,J(n,t),x.EQ);b(e);y(t)},onClickRow:function(e){
var n=$(e);u((function(r){var t=G({},r);if(n in t)delete t[n];else{var i;e.rowType===x.aC.ROLE||e.rowType===x.aC.ADMINISTRATOR?i={type:d.Fj.ROLE,label:e.name,color:e.colorString}:e.rowType!==x.aC.MEMBER&&e.rowType!==x.aC.OWNER||(i={type:d.Fj.MEMBER,label:e.name,avatar:e.avatarURL});null!=i&&(t[n]={display:i,row:e})}return t}))},onRemovePendingAddition:function(e){u((function(n){n[e];return V(n,[e].map(q))}))},roles:n,members:T,placeholderText:O,hintText:w,renderEmptyText:I,isStageChannel:f,description:E})}function ne(e){var n=e.listClassName,r=e.pendingAdditions,o=e.query,l=e.onQueryChange,c=e.onClickRow,d=e.onRemovePendingAddition,E=e.roles,h=e.members,p=e.placeholderText,S=e.hintText,g=e.renderEmptyText,b=e.isStageChannel,T=e.focusSearchAfterReady,R=e.isReady,O=e.description,M=function(){var e;D(!(null===(e=w.current)||void 0===e?void 0:e.isScrolledToTop())&&ne)},A=i.useRef(null),w=i.useRef(null),I=(0,s.e7)([v.Z],(function(){return v.Z.hidePersonalInformation
})),L=U(i.useState(!1),2),Z=L[0],D=L[1],k=U(i.useState(0),2),H=k[0],G=k[1],z=U(i.useState(-1),2),V=z[0],q=z[1],Y=i.useCallback((function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];G(e);q(n);if(r){var t;null===(t=w.current)||void 0===t||t.scrollToIndex({section:null!=e?e:0,row:null!=n?n:0,padding:8})}}),[]),W=i.useCallback((function(e,n){if(null!=n){l("");var r=(e===x.$M.ROLES?E:h)[n];r.rowType!==x.aC.EMPTY_STATE&&c(r)}}),[E,h,c,l]),J=i.useCallback((function(e){var n;if(null!=e&&e.rowType!==x.aC.EMPTY_STATE){c(e);l("");null===(n=A.current)||void 0===n||n.focus()}}),[c,l]),ee=i.useMemo((function(){return Object.keys(r)}),[r]),ne=h.some((function(e){return!e.disabled}))||E.some((function(e){return!e.disabled}))||""===o.trim();i.useEffect((function(){M()}));return(0,t.jsxs)("div",{className:j().content,children:[function(){var e=O;null==e&&b&&(e=P.Z.Messages.CHANNEL_PERMISSIONS_MODERATOR_DESCRIPTION);return null==e||""===e?null:(0,t.jsx)(u.xvT,{
color:"header-secondary",className:j().description,variant:"text-sm/normal",children:e})}(),(0,t.jsxs)("div",{className:a()(j().searchBox,B({},j().scrollSeparator,Z)),children:[(0,t.jsx)(C,{ref:A,query:o,onQueryChange:l,selectedSection:H,selectedRow:V,onSelectionChange:Y,onSelect:W,tags:ee.map((function(e){return r[e].display})),sections:[E.length,h.length],onRemoveTag:function(e){d(ee[e])},placeholder:p,focusAfterReady:T,isReady:R,"aria-labelledby":F,"aria-controls":X}),null!=S?(0,t.jsx)(u.xvT,{variant:"text-xs/normal",children:S}):null]}),ne?(0,t.jsx)(u.aVo,{ref:w,className:a()(j().roleMemberList,n),sections:[E.length,h.length],renderRow:function(e){var n,i,o=e.section,l=e.row,s=null,c=!1,d=!1,f=!1;switch(o){case x.$M.ROLES:c=(i=$(s=E[l]))in r||s.disabled;d=s.disabled;f=H===x.$M.ROLES&&V===l;n=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:a()(j().rowHeight,j().alignCenter),children:(0,t.jsx)(N.Z,{color:s.colorString,height:20})}),(0,t.jsxs)("div",{
className:j().rowLabel,children:[(0,t.jsx)(u.xvT,{variant:"text-sm/medium",className:j().rowTitle,color:s.rowType===x.aC.EMPTY_STATE?"text-muted":"text-normal",children:s.name}),b&&s.disabled?(0,t.jsx)(u.xvT,{color:"header-secondary",variant:"text-xs/normal",children:P.Z.Messages.CHANNEL_PERMISSIONS_ROLE_ALREADY_HAS_PERMISSIONS}):null]})]});break;case x.$M.MEMBERS:c=(i=$(s=h[l]))in r||s.disabled;d=s.disabled;f=H===x.$M.MEMBERS&&V===l;n=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.qEK,{src:s.avatarURL,size:u.EFr.SIZE_24,"aria-label":""}),(0,t.jsx)(u.xvT,{className:j().rowLabel,"aria-hidden":!I,variant:"text-sm/normal",children:s.name}),s.bot&&(0,t.jsx)(y.Z,{verified:s.verifiedBot}),!I&&(0,t.jsx)(u.xvT,{color:"text-muted",className:j().rowLabelSubText,variant:"text-sm/normal",children:s.userTag})]})}return null==s?null:(0,t.jsx)(K,{id:"user-row-".concat(l),rowLabel:_.zB(s.rowType),checked:c,disabled:d,onSelect:function(){return J(s)},showCheckbox:s.rowType!==x.aC.EMPTY_STATE,
onMouseEnter:function(){return Y(o,l,!1)},selected:f,"aria-posinset":l+1,"aria-setsize":E.length+h.length,children:(0,t.jsx)(m.Z,{align:m.Z.Align.CENTER,justify:m.Z.Justify.START,children:n})},i)},rowHeight:40,renderSection:function(e){switch(e.section){case x.$M.ROLES:return Q(P.Z.Messages.ROLES);case x.$M.MEMBERS:return Q(P.Z.Messages.MEMBERS)}},sectionHeight:32,onScroll:M,role:void 0,innerRole:"listbox",innerId:X,innerAriaMultiselectable:!0,innerAriaOrientation:"vertical"}):(0,t.jsxs)(m.Z,{className:n,align:m.Z.Align.CENTER,justify:m.Z.Justify.CENTER,direction:m.Z.Direction.VERTICAL,children:[(0,t.jsx)(f.Z,{className:j().noResultIcon}),(0,t.jsx)(u.xvT,{variant:"text-sm/normal",children:g(o)})]})]})}function re(e){var n=e.transitionState,r=e.onClose,o=e.channelId,a=e.newChannel,l=e.inSettings,c=U(i.useState(!1),2),d=c[0],f=c[1],p=U(i.useState({}),2),v=p[0],y=p[1],g=(0,s.e7)([h.Z],(function(){return h.Z.getChannel(o)}),[o]),N=(0,s.e7)([S.Z],(function(){
return S.Z.getGuild(null==g?void 0:g.getGuildId())}));i.useEffect((function(){R.default.track(L.rMx.OPEN_MODAL,{type:"Grant Channel Access"})}),[]);if(null==g||null==N)return null;var O=a&&0===Object.keys(v).length;function M(){return(M=H((function(){return W(this,(function(e){switch(e.label){case 0:if(null==g||0===Object.keys(v).length){r();return[2]}f(!0);e.label=1;case 1:e.trys.push([1,3,,4]);return[4,te(g,v,l)];case 2:e.sent();r();f(!1);return[3,4];case 3:e.sent();f(!1);return[3,4];case 4:return[2]}}))}))).apply(this,arguments)}var A=(0,E.zi)(g.type)?b.Z:T.Z;return(0,t.jsxs)(u.Y0X,{transitionState:n,size:u.CgR.SMALL,"aria-labelledby":F,className:j().modalRoot,children:[(0,t.jsxs)(u.xBx,{separator:!1,direction:m.Z.Direction.VERTICAL,align:m.Z.Align.CENTER,className:j().header,children:[(0,t.jsx)(u.X6q,{id:F,variant:"heading-xl/semibold",children:P.Z.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TITLE}),(0,t.jsxs)(u.xvT,{variant:"text-md/normal",color:"header-secondary",
className:j().headerSubtitle,children:[(0,t.jsx)(A,{height:16,width:16,className:j().headerSubtitleIcon}),g.name]})]}),(0,t.jsx)(ee,{guild:N,channel:g,permission:g.accessPermissions,pendingAdditions:v,setPendingAdditions:y}),(0,t.jsxs)(u.mzw,{children:[!O&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.zxk,{onClick:function(){return M.apply(this,arguments)},look:u.zxk.Looks.FILLED,size:u.zxk.Sizes.SMALL,className:j().button,submitting:d,children:P.Z.Messages.DONE}),(0,t.jsx)(u.zxk,{look:u.zxk.Looks.LINK,color:u.zxk.Colors.TRANSPARENT,onClick:r,size:u.zxk.Sizes.SMALL,children:P.Z.Messages.CANCEL})]}),O&&(0,t.jsx)(u.zxk,{look:u.zxk.Looks.FILLED,color:u.zxk.Colors.PRIMARY,onClick:r,size:u.zxk.Sizes.SMALL,children:P.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_SKIP})]})]})}function te(e,n,r){var t=[];Object.values(n).forEach((function(n){var r=n.row;null!=r.id&&""!==r.id&&(r.rowType===x.aC.ROLE?t.push((0,O.rX)(r.id,e.type)):r.rowType===x.aC.MEMBER&&t.push((0,O.jZ)(r.id,e.type)))}));return(0,
c.hw)(e.id,t,r)}},20170:(e,n,r)=>{r.d(n,{C:()=>y,u:()=>N});var t=r(940060),i=r(105783),o=r(703790),a=r(567403),l=r(888236),s=r(404741),u=r(185219),c=r(322008),d=r(2590),f=r(473708);function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function h(e,n,r,t,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?n(s):Promise.resolve(s).then(t,i)}function p(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var o=e.apply(n,r);function a(e){h(o,t,i,a,l,"next",e)}function l(e){h(o,t,i,a,l,"throw",e)}a(void 0)}))}}function S(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return E(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r)
;if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=function(e,n){var r,t,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(i=2&o[0]?t.return:o[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,o[1])).done)return i;(t=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;t=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0
;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=n.call(e,a)}catch(e){o=[6,e];t=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function y(e,n){return m.apply(this,arguments)}function m(){return(m=p((function(e,n){return v(this,(function(r){switch(r.label){case 0:return null==e?[2,!0]:[4,g(e,n,{removingView:!0,removingChat:!0})];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}function g(e,n,r){return b.apply(this,arguments)}function b(){return(b=p((function(e,n,r){var t,i,o,f,E,h,p;return v(this,(function(v){switch(v.label){case 0:return null==(i=a.Z.getGuild(e))?[2,!0]:(o=null!=i&&(null===(t=i.features)||void 0===t?void 0:t.has(d.oNc.GUILD_ONBOARDING)))?o&&s.Z.shouldFetchPrompts(e)?[4,(0,l.eM)(e)]:[3,2]:[2,!0];case 1:v.sent();v.label=2;case 2:f=s.Z.getDefaultChannelIds(e)
;if(!f.includes(n))return[2,!0];E=r.removingView&&f.length-1<c.md;h=(0,u.od)(e,S(f));p=(r.removingChat||r.removingView)&&h.length-1<c.X;return[2,!E&&!p]}}))}))).apply(this,arguments)}function N(e,n,r){return T.apply(this,arguments)}function T(){return(T=p((function(e,n,r){var a,l,s,u;return v(this,(function(c){switch(c.label){case 0:if(null==(a=e.getGuildId()))return[2,!0];null!=r&&(n=t.Z.filter(n,t.Z.invert(r)));l=e.permissionOverwrites[a];s=null!=l?t.Z.filter(l.deny,t.Z.invert(l.allow)):t.Z.deserialize(0);u={removingView:t.Z.has(n,d.Plq.VIEW_CHANNEL)&&!t.Z.has(s,d.Plq.VIEW_CHANNEL),removingChat:!1};e.isForumLikeChannel()?u.removingChat=t.Z.has(n,d.Plq.SEND_MESSAGES_IN_THREADS)&&!t.Z.has(s,d.Plq.SEND_MESSAGES_IN_THREADS):u.removingChat=t.Z.has(n,d.Plq.SEND_MESSAGES)&&!t.Z.has(s,d.Plq.SEND_MESSAGES);return u.removingChat||u.removingView?[4,g(a,e.id,u)]:[2,!0];case 1:if(!c.sent()){i.Z.show({title:f.Z.Messages.CANNOT_CHANGE_CHANNEL_PERMS,
body:f.Z.Messages.ONBOARDING_CHANNEL_THRESHOLD_WARNING.format({onClick:function(){i.Z.close();o.Z.open(a,d.pNK.ONBOARDING)}})});return[2,!1]}return[2,!0]}}))}))).apply(this,arguments)}},407737:(e,n,r)=>{r.d(n,{Z:()=>s});var t=r(785893),i=(r(667294),r(294184)),o=r.n(i),a=r(30363),l=r.n(a);function s(e){var n=e.className;return(0,t.jsx)("div",{className:o()(l().image,n)})}}}]);
//# sourceMappingURL=bf0e38cb183fa0758794.js.map