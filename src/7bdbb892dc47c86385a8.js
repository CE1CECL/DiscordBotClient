(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[66658],{489893:(e,t,n)=>{e.exports=n.p+"dea5252276408a8bfca6dda585ca5216.svg"},340563:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(999357),a=n(165695),i=n(744564),o=n(801809),l=n(2590);function s(e,t,n,r,a,i,o){try{var l=e[i](o),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){s(i,r,a,o,l,"next",e)}function l(e){s(i,r,a,o,l,"throw",e)}o(void 0)}))}}var u=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),
0):r.next)&&!(a=a.call(r,i[1])).done)return a;(r=0,a)&&(i=[2&i[0],a.value]);switch(i[0]){case 0:case 1:a=i;break;case 4:o.label++;return{value:i[1],done:!1};case 5:o.label++;r=i[1];i=[0];continue;case 7:i=o.ops.pop();o.trys.pop();continue;default:if(!(a=o.trys,a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1];a=i;break}if(a&&o.label<a[2]){o.label=a[2];o.ops.push(i);break}a[2]&&o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e];r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};const f={signup:function(e,t){return o.Z.post({url:l.ANM.HUB_WAITLIST_SIGNUP,body:{email:e,school:t},trackedActionData:{event:r.a9.HUB_WAITLIST_SIGNUP,properties:function(e){var t,n=!1,r=null==e||null===(t=e.body)||void 0===t?void 0:t.email_domain;if(null!=r){n=-1!==r.split(".").indexOf("edu")}return(0,a.iG)({is_edu_email:n})}}})},
sendVerificationEmail:function(e,t,n){return c((function(){return u(this,(function(i){switch(i.label){case 0:return[4,o.Z.post({url:l.ANM.HUB_EMAIL_VERIFY_SEND,body:{email:e,guild_id:n,allow_multiple_guilds:t,use_verification_code:!0},trackedActionData:{event:r.a9.HUB_EMAIL_VERIFY_SEND,properties:function(e){var t,n=null==e||null===(t=e.body)||void 0===t?void 0:t.has_matching_guild;return(0,a.iG)({has_matching_guild:n})}}})];case 1:return[2,i.sent().body]}}))}))()},verify:function(e){return c((function(){var t,n,a,s;return u(this,(function(c){switch(c.label){case 0:if(null==e)return[3,4];c.label=1;case 1:c.trys.push([1,3,,4]);return[4,o.Z.post({url:l.ANM.HUB_EMAIL_VERIFY,body:{token:e},trackedActionData:{event:r.a9.HUB_EMAIL_VERIFY}})];case 2:n=c.sent();a=null===(t=n.body.guild)||void 0===t?void 0:t.id;i.Z.dispatch({type:"HUB_VERIFY_EMAIL_SUCCESS",guildId:a});return[3,4];case 3:s=c.sent();i.Z.dispatch({type:"HUB_VERIFY_EMAIL_FAILURE",errors:s.body});return[3,4];case 4:return[2]}}))
}))()},verifyCode:function(e,t,n){return c((function(){var a,s,c,f;return u(this,(function(u){switch(u.label){case 0:if(null==e)return[3,4];u.label=1;case 1:u.trys.push([1,3,,4]);return[4,o.Z.post({url:l.ANM.HUB_EMAIL_VERIFY_CODE,body:{code:e,guild_id:t,email:n},trackedActionData:{event:r.a9.HUB_EMAIL_VERIFY}})];case 2:s=u.sent();c=null===(a=s.body.guild)||void 0===a?void 0:a.id;i.Z.dispatch({type:"HUB_VERIFY_EMAIL_SUCCESS",guildId:c});return[2,s.body];case 3:f=u.sent();i.Z.dispatch({type:"HUB_VERIFY_EMAIL_FAILURE",errors:f.body});throw f;case 4:return[2]}}))}))()}}},215841:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a,b:()=>i});var r=(0,n(260561).B)({kind:"user",id:"2022-08_back_to_school",label:"Back to School Event",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Back to School experience enabled",config:{enabled:!0}}]});const a=r;function i(){return r.getCurrentConfig({}).enabled}},356639:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_})
;var r=n(730381),a=n.n(r),i=n(418705),o=n(588415),l=n(984237);var s=n(896490),c=n(567403),u=n(489770),f=n(473903),d=n(113469),h=n(102921),m=n(215841),p=n(2590),v=n(458947);const _={init:function(e){var t=e.hasModalOpen,n=e.openModal;d.s.isDisallowPopupsSet()||(0,u.h)((function(){if(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.Z;return null!=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.Z).getAction()||Object.keys(e.getState()).length>0}()){var e=f.default.getCurrentUser(),r=null!=e&&a()().diff(a()(h.Z.extractTimestamp(e.id)),"days")<7,u=null!=Object.values(c.Z.getGuilds()).find((function(e){return e.hasFeature(p.oNc.HUB)})),d=!(0,s.un)(i.z$.HUB_BACK_TO_SCHOOL_UPSELL);if(!(r||t()||u||!d)&&(0,m.b)()){m.Z.trackExposure({});n();(0,s.kk)(i.z$.HUB_BACK_TO_SCHOOL_UPSELL)}}}))},hideHubUpsell:function(){(0,s.EW)(i.z$.HUB_BACK_TO_SCHOOL_UPSELL,{dismissAction:v.L.AUTO})}}},966658:(e,t,n)=>{"use strict";n.r(t);n.d(t,{HubEmailConnectionModalView:()=>ge,
default:()=>Ie});var r=n(785893),a=n(667294),i=n(999357),o=n(707961),l=n(415879),s=n(356639),c=n(294184),u=n.n(c),f=n(340563),d=n(347365),h=n(61209),m=n(443812),p=n(75025),v=n(2590),_=n(473708),N=n(730876),y=n.n(N);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t,n,r,a,i,o){try{var l=e[i](o),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){l=!0;a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name)
;if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;(r=0,a)&&(i=[2&i[0],a.value]);switch(i[0]){case 0:case 1:a=i;break;case 4:o.label++;return{value:i[1],done:!1};case 5:o.label++;r=i[1];i=[0];continue;case 7:i=o.ops.pop();o.trys.pop();continue;default:if(!(a=o.trys,
a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1];a=i;break}if(a&&o.label<a[2]){o.label=a[2];o.ops.push(i);break}a[2]&&o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e];r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},x=(0,m.hQ)();const S=function(e){var t,n,i=e.setStep,l=e.setGuildsInfo,s=e.email,c=e.setEmail,m=e.setGuildId,N=e.invite,b=e.onClose,S=e.isNUXFlow,C=I(a.useState(null),2),T=C[0],A=C[1],O=I(a.useState(!1),2),w=O[0],j=O[1],L=(n=(t=function(e){var t,n,r,a,o,c,u,v,_;return g(this,(function(y){switch(y.label){case 0:e.preventDefault();A(null);j(!0);y.label=1;case 1:y.trys.push([1,8,9,10])
;(c=null!==(o=null!==(a=null==N||null===(t=N.guild)||void 0===t?void 0:t.id)&&void 0!==a?a:null===(r=h.Z.getChannel(null==N||null===(n=N.channel)||void 0===n?void 0:n.id))||void 0===r?void 0:r.getGuildId())&&void 0!==o?o:void 0)===p.fQ&&(c=void 0);return[4,f.Z.sendVerificationEmail(s,!0,c)];case 2:u=y.sent();v=u.guilds_info;if(!u.has_matching_guild)return[3,3];m(c);i(p.tF.VERIFY_PIN);return[3,7];case 3:if(0!==v.length)return[3,4];i(p.tF.SUBMIT_SCHOOL);return[3,7];case 4:if(1!==v.length)return[3,6];m(v[0].id);return[4,f.Z.sendVerificationEmail(s,!0,v[0].id)];case 5:y.sent();i(p.tF.VERIFY_PIN);return[3,7];case 6:l(v);i(p.tF.SELECT_SCHOOL);y.label=7;case 7:return[3,10];case 8:_=y.sent();A(new d.Hx(_));return[3,10];case 9:j(!1);return[7];case 10:return[2]}}))},function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(e){E(i,r,a,o,l,"next",e)}function l(e){E(i,r,a,o,l,"throw",e)}o(void 0)}))}),function(e){return n.apply(this,arguments)
}),M=_.Z.Messages.HUB_EMAIL_CONNECTION_CONTENT_HEADER,U=_.Z.Messages.HUB_EMAIL_CONNECTION_CONTENT_DESCRIPTION;if(S){M=_.Z.Messages.HUB_EMAIL_CONNECTION_NUX_HEADER;U=_.Z.Messages.HUB_EMAIL_CONNECTION_NUX_CONTENT_DESCRIPTION}else if(null!=(null==N?void 0:N.guild)&&N.guild.id!==p.fQ&&null!=(null==N?void 0:N.approximate_member_count)){var k=N.guild.name;M=_.Z.Messages.HUB_EMAIL_CONNECTION_INVITE_HEADER.format({guildName:k,count:N.approximate_member_count})}return(0,r.jsxs)("div",{className:y().container,children:[(0,r.jsx)("div",{className:y().topImage}),(0,r.jsx)(o.X6q,{className:u()(y().centerText,y().header),variant:"heading-xl/semibold",children:M}),(0,r.jsx)("div",{className:y().descriptionWidth,children:(0,r.jsx)(o.xvT,{className:y().centerText,variant:"text-sm/normal",color:"header-secondary",children:U})}),(0,r.jsxs)("form",{className:y().formContent,onSubmit:L,children:[(0,r.jsxs)(o.xJW,{children:[(0,r.jsx)(o.vwX,{id:x,
children:_.Z.Messages.HUB_EMAIL_CONNECTION_CONTENT_INPUT_HEADER}),(0,r.jsx)(o.oil,{placeholder:_.Z.Messages.HUB_EMAIL_CONNECTION_CONTENT_INPUT_PLACEHOLDER,onChange:function(e){c(e)},error:null==T?void 0:T.getAnyErrorMessage(),"aria-labelledby":x})]}),(0,r.jsx)(o.xvT,{color:"header-secondary",className:y().formDescription,variant:"text-sm/normal",children:_.Z.Messages.HUB_EMAIL_CONNECTION_CONTENT_INPUT_DESCRIPTION}),(0,r.jsx)(o.zxk,{type:"submit",size:o.zxk.Sizes.LARGE,color:o.zxk.Colors.BRAND,className:y().submitButton,submitting:w,children:_.Z.Messages.HUB_EMAIL_CONNECTION_CONTENT_BUTTON}),(0,r.jsx)(o.xvT,{className:y().termsPhrase,color:"header-secondary",variant:"text-xs/normal",children:_.Z.Messages.HUB_EMAIL_CONNECTION_CONTENT_TOS_AND_PP.format({termsURL:v.EYA.TERMS,privacyURL:v.EYA.PRIVACY})}),S&&(0,r.jsx)(o.zxk,{look:o.zxk.Looks.LINK,onClick:b,className:y().cancelButton,children:_.Z.Messages.HUB_EMAIL_CONNECTION_CANCEL})]})]})}
;var C=n(824390),T=n.n(C),A=n(848285),O=n(124251),w=n(282898),j=n(211482),L=n(775173),M=n(4826),U=n.n(M),k=n(489893),H=n.n(k);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t,n,r,a,i,o){try{var l=e[i](o),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){B(i,r,a,o,l,"next",e)}function l(e){B(i,r,a,o,l,"throw",e)}o(void 0)}))}}function P(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){l=!0;a=e}finally{try{
o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var F=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),
0):r.next)&&!(a=a.call(r,i[1])).done)return a;(r=0,a)&&(i=[2&i[0],a.value]);switch(i[0]){case 0:case 1:a=i;break;case 4:o.label++;return{value:i[1],done:!1};case 5:o.label++;r=i[1];i=[0];continue;case 7:i=o.ops.pop();o.trys.pop();continue;default:if(!(a=o.trys,a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1];a=i;break}if(a&&o.label<a[2]){o.label=a[2];o.ops.push(i);break}a[2]&&o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e];r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};function G(e){var t,n=e.guildInfo,a=e.onClick,i=e.submitting,l=null!==(t=L.ZP.getGuildIconURL({id:n.id,icon:n.icon,size:40}))&&void 0!==t?t:void 0;return(0,r.jsxs)(o.P3F,{className:U().clickableGuildInfoRow,onClick:a,children:[(0,r.jsx)(j.ZP,{mask:j.ZP.Masks.AVATAR_DEFAULT,width:40,height:40,children:(0,r.jsx)(O.Z,{className:U().guildIcon,iconSrc:l,
guild:new A.Z(n),size:O.Z.Sizes.MEDIUM})}),(0,r.jsx)(o.xvT,{className:U().guildName,variant:"text-md/semibold",children:n.name}),i?(0,r.jsx)(o.$jN,{type:o.$jN.Type.PULSING_ELLIPSIS}):(0,r.jsx)("img",{className:U().arrow,alt:"",src:H()})]})}const z=function(e){var t=e.setStep,n=e.email,i=e.guildsInfo,l=e.setGuildId,s=e.forceGuildScrollHeight,c=D(a.useState(null),2),h=c[0],m=c[1],v=D(a.useState(void 0),2),N=v[0],y=v[1],b=D(a.useState(null),2),E=b[0],I=b[1],g=function(){return t(p.tF.SUBMIT_SCHOOL)},x=i;null!=N&&""!==N&&(x=i.filter((function(e){return T()(N.toLowerCase(),e.name.toLowerCase())})));return(0,r.jsxs)("div",{className:U().container,children:[(0,r.jsx)(o.X6q,{className:u()(U().centerText,U().header),variant:"heading-xl/semibold",children:_.Z.Messages.HUB_EMAIL_CONNECTION_GUILD_SELECT_HEADER}),(0,r.jsx)("div",{className:U().description,children:(0,r.jsx)(o.xvT,{className:U().centerText,variant:"text-sm/normal",color:"header-secondary",
children:_.Z.Messages.HUB_EMAIL_CONNECTION_GUILD_SELECT_SUBHEADER.format({onJoinWaitlist:g})})}),(0,r.jsxs)("div",{className:u()(U().guildList,P({},U().forcedHeight,s)),children:[(0,r.jsxs)("div",{className:U().searchContainer,children:[(0,r.jsx)(w.Z,{placeholder:_.Z.Messages.SEARCH,className:U().searchBox,inputClassName:U().searchBoxInput,searchIconClassName:U().searchBoxIcon,closeIconClassName:U().searchBoxIcon,onChange:function(e){y(e)},label:_.Z.Messages.SEARCH,searchTerm:N,onClear:function(){y(void 0)}}),(0,r.jsx)(o.xvT,{color:"text-danger",variant:"text-xs/normal",children:null==h?void 0:h.getAnyErrorMessage()})]}),x.length>0?(0,r.jsx)(o.zJl,{className:U().scroller,children:x.map((function(e){return void 0===e?null:(0,r.jsx)(G,{guildInfo:e,onClick:(a=e.id,Z((function(){var e;return F(this,(function(r){switch(r.label){case 0:m(null);l(a);I(a);r.label=1;case 1:r.trys.push([1,3,4,5]);return[4,f.Z.sendVerificationEmail(n,!0,a)];case 2:r.sent();t(p.tF.VERIFY_PIN);return[3,5];case 3:
e=r.sent();m(new d.Hx(e));return[3,5];case 4:I(null);return[7];case 5:return[2]}}))}))),submitting:E===e.id},e.id);var a}))}):(0,r.jsx)("div",{className:U().noResultsContainer,children:(0,r.jsxs)("div",{className:U().noResultsContent,children:[(0,r.jsx)("div",{className:U().noResultsImage}),(0,r.jsx)(o.X6q,{className:u()(U().centerText,U().header),variant:"heading-xl/semibold",children:_.Z.Messages.HUB_EMAIL_CONNECTION_GUILD_SELECT_NO_RESULTS_HEADER}),(0,r.jsx)(o.xvT,{className:U().centerText,variant:"text-md/normal",children:_.Z.Messages.HUB_EMAIL_CONNECTION_GUILD_SELECT_NO_RESULTS_SUBHEADER.format({onJoinWaitlist:g})})]})})]})]})};var V=n(189234),W=n.n(V);function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t,n,r,a,i,o){try{var l=e[i](o),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function X(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n)
;function o(e){K(i,r,a,o,l,"next",e)}function l(e){K(i,r,a,o,l,"throw",e)}o(void 0)}))}}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){l=!0;a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var $=function(e,t){var n,r,a,i,o={
label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;(r=0,a)&&(i=[2&i[0],a.value]);switch(i[0]){case 0:case 1:a=i;break;case 4:o.label++;return{value:i[1],done:!1};case 5:o.label++;r=i[1];i=[0];continue;case 7:i=o.ops.pop();o.trys.pop();continue;default:if(!(a=o.trys,a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1];a=i;break}if(a&&o.label<a[2]){o.label=a[2];o.ops.push(i);break}a[2]&&o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e];r=0}finally{n=a=0}if(5&i[0])throw i[1];return{
value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},q=(0,m.hQ)();const Q=function(e){var t,n=e.email,i=e.setStep,l=e.onBack,s=e.school,c=e.setSchool,h=J(a.useState(null),2),m=h[0],N=h[1],y=J(a.useState(!1),2),b=y[0],E=y[1],I=(t=X((function(){var e;return $(this,(function(t){switch(t.label){case 0:N(null);E(!0);t.label=1;case 1:t.trys.push([1,3,4,5]);return[4,f.Z.signup(n,s)];case 2:t.sent();i(p.tF.EMAIL_WAITLIST);return[3,5];case 3:e=t.sent();N(new d.Hx(e));return[3,5];case 4:E(!1);return[7];case 5:return[2]}}))})),function(){return t.apply(this,arguments)}),g=function(){var e=X((function(e){return $(this,(function(t){switch(t.label){case 0:return null==s||""===s||e.charCode!==v.yXg.ENTER?[3,2]:[4,I()];case 1:t.sent();t.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,r.jsxs)("div",{className:W().container,children:[(0,r.jsx)("div",{className:W().topImage}),(0,r.jsx)(o.X6q,{className:u()(W().centerText,W().header),variant:"heading-xl/semibold",
children:_.Z.Messages.HUB_EMAIL_CONNECTION_SCHOOL_SUBMIT_HEADER}),(0,r.jsx)("div",{className:W().descriptionWidth,children:(0,r.jsx)(o.xvT,{className:W().centerText,variant:"text-sm/normal",color:"header-secondary",children:_.Z.Messages.HUB_EMAIL_CONNECTION_SCHOOL_SUBMIT_DESCRIPTION})}),(0,r.jsxs)(o.xJW,{className:W().formItem,children:[(0,r.jsx)(o.vwX,{id:q,children:_.Z.Messages.HUB_EMAIL_CONNECTION_SCHOOL_SUBMIT_INPUT_HEADER}),(0,r.jsx)(o.oil,{onKeyPress:g,placeholder:_.Z.Messages.HUB_EMAIL_CONNECTION_SCHOOL_SUBMIT_INPUT_PLACEHOLDER,onChange:function(e){c(e)},error:null==m?void 0:m.getAnyErrorMessage(),"aria-labelledby":q})]}),(0,r.jsxs)("div",{className:W().footer,children:[(0,r.jsx)(o.zxk,{className:W().backButton,onClick:l,look:o.zxk.Looks.LINK,size:o.zxk.Sizes.NONE,color:o.zxk.Colors.PRIMARY,children:_.Z.Messages.BACK}),(0,r.jsx)(o.zxk,{onClick:I,size:o.zxk.Sizes.MEDIUM,color:o.zxk.Colors.BRAND,className:W().submitButton,submitting:b,children:_.Z.Messages.JOIN_WAITLIST})]})]})}
;var ee=n(496486),te=n.n(ee),ne=n(784426),re=n(221487),ae=n.n(re);function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e,t,n,r,a,i,o){try{var l=e[i](o),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function le(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){oe(i,r,a,o,l,"next",e)}function l(e){oe(i,r,a,o,l,"throw",e)}o(void 0)}))}}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){l=!0;a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ce=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;(r=0,a)&&(i=[2&i[0],a.value]);switch(i[0]){case 0:case 1:a=i;break;case 4:o.label++;return{value:i[1],done:!1};case 5:o.label++;r=i[1];i=[0];continue;case 7:
i=o.ops.pop();o.trys.pop();continue;default:if(!(a=o.trys,a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1];a=i;break}if(a&&o.label<a[2]){o.label=a[2];o.ops.push(i);break}a[2]&&o.ops.pop();o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e];r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},ue=(0,m.hQ)();const fe=function(e){var t,n=e.email,i=e.guildId,l=e.onClose,s=se(a.useState(""),2),c=s[0],h=s[1],m=se(a.useState(null),2),p=m[0],N=m[1],y=a.useCallback(le((function(){var e,t;return ce(this,(function(r){switch(r.label){case 0:if(null==i)return[3,4];r.label=1;case 1:r.trys.push([1,3,,4]);return[4,f.Z.verifyCode(c,i,n)];case 2:if((e=r.sent()).guild){null==l||l();(0,ne.uL)(v.Z5c.CHANNEL(e.guild.id))}return[3,4];case 3:t=r.sent();N(new d.Hx(t));return[3,4];case 4:return[2]}}))})),[c,n,i,l]),b=te().throttle((function(){
f.Z.sendVerificationEmail(n,!0,i)}),1e3),E=(t=le((function(e){return ce(this,(function(t){switch(t.label){case 0:return null==c||""===c||e.charCode!==v.yXg.ENTER?[3,2]:[4,y()];case 1:t.sent();t.label=2;case 2:return[2]}}))})),function(e){return t.apply(this,arguments)});return(0,r.jsxs)("div",{className:ae().container,children:[(0,r.jsx)("div",{className:ae().topImage}),(0,r.jsx)(o.X6q,{className:u()(ae().centerText,ae().header),variant:"heading-xl/semibold",children:_.Z.Messages.HUB_VERIFY_EMAIL_ADDRESS}),(0,r.jsx)("div",{className:ae().descriptionWidth,children:(0,r.jsx)(o.xvT,{className:ae().centerText,variant:"text-sm/normal",color:"header-secondary",children:_.Z.Messages.HUB_PIN_DESCRIPTION.format({email:n,onClick:b})})}),(0,r.jsxs)(o.xJW,{className:ae().formItem,children:[(0,r.jsx)(o.vwX,{id:ue,children:_.Z.Messages.HUB_ENTER_PIN}),(0,r.jsx)(o.oil,{onKeyPress:E,label:_.Z.Messages.HUB_ENTER_PIN,onChange:function(e){null!=e&&""!==e&&h(e)},
error:null==p?void 0:p.getAnyErrorMessage(),"aria-labelledby":ue})]}),(0,r.jsx)(o.zxk,{fullWidth:!0,onClick:y,size:o.zxk.Sizes.LARGE,color:o.zxk.Colors.BRAND,children:(0,r.jsx)(o.xvT,{className:ae().submitText,variant:"text-sm/normal",children:_.Z.Messages.SUBMIT})})]})};const de=function(e){var t=e.school,n=e.setStep;return(0,r.jsxs)("div",{className:y().container,children:[(0,r.jsx)("div",{className:y().topImage}),(0,r.jsx)(o.X6q,{className:u()(y().centerText,y().header),variant:"heading-xl/semibold",children:_.Z.Messages.HUB_WAITLIST_MODAL_JOINED_HEADER}),(0,r.jsx)("div",{className:y().descriptionWidth,children:(0,r.jsx)(o.xvT,{className:y().centerText,variant:"text-sm/normal",color:"header-secondary",children:_.Z.Messages.HUB_WAITLIST_MODAL_JOINED_DESCRIPTION.format({school:t})})}),(0,r.jsx)(o.zxk,{look:o.zxk.Looks.LINK,size:o.zxk.Sizes.SMALL,color:o.zxk.Colors.LINK,onClick:function(){n(p.tF.VERIFY_EMAIL)},className:y().resendLink,
children:_.Z.Messages.HUB_EMAIL_CONFIRMATION_DIFFERENT_EMAIL})]})};function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){l=!0;a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return he(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const pe=function(e){var t=e.onClose,n=e.invite,i=e.forceGuildScrollHeight,o=void 0===i||i,l=e.isNUXFlow,s=me(a.useState([p.tF.VERIFY_EMAIL]),2),c=s[0],u=s[1],f=me(a.useState(""),2),d=f[0],h=f[1],m=me(a.useState(""),2),v=m[0],_=m[1],N=me(a.useState(void 0),2),y=N[0],b=N[1],E=me(a.useState([]),2),I=E[0],g=E[1],x=function(e){var t=c.concat(e);u(t.slice(-4))};switch(c[c.length-1]){case p.tF.VERIFY_EMAIL:return(0,r.jsx)(S,{setGuildsInfo:g,setStep:x,email:d,setEmail:h,setGuildId:b,invite:n,onClose:t,isNUXFlow:l});case p.tF.SELECT_SCHOOL:return(0,r.jsx)(z,{guildsInfo:I,setStep:x,email:d,setGuildId:b,forceGuildScrollHeight:o});case p.tF.SUBMIT_SCHOOL:return(0,r.jsx)(Q,{onBack:function(){if(c.length>1){var e=c.slice(0,-1);u(e.slice(-4))}},setStep:x,email:d,school:v,setSchool:_});case p.tF.VERIFY_PIN:return(0,r.jsx)(fe,{email:d,
onClose:t,guildId:y});case p.tF.EMAIL_WAITLIST:return(0,r.jsx)(de,{setStep:x,school:v});default:return null}};var ve=n(744004),_e=n.n(ve);const Ne=function(){return(0,r.jsxs)("div",{className:_e().container,children:[(0,r.jsx)("div",{className:_e().iconContainer,children:(0,r.jsx)("div",{className:_e().icon})}),(0,r.jsx)(o.xvT,{color:"header-primary",variant:"text-lg/semibold",className:_e().header,children:_.Z.Messages.HUB_EMAIL_CONNECTION_SIDEBAR_HEADER}),(0,r.jsx)(o.xvT,{color:"header-secondary",variant:"text-sm/normal",className:_e().description,children:_.Z.Messages.HUB_EMAIL_CONNECTION_SIDEBAR_DESCRIPTION.format()})]})};var ye=n(571680),be=n(73273),Ee=n.n(be);function Ie(e){var t=e.transitionState,n=e.onClose,c=e.isNUXFlow;a.useEffect((function(){s.Z.hideHubUpsell();c&&l.Z.flowStep(ye.MK.ORGANIC,ye.EW.HUB_CONNECTION)}),[c]);return(0,r.jsx)(o.Y0X,{className:Ee().modalRoot,transitionState:t,"aria-label":_.Z.Messages.HUB_WAITLIST_MODAL_JOIN_HEADER,
impressionName:i.zs.HUB_EMAIL_SIGNUP,children:(0,r.jsx)(o.hzk,{style:{overflow:"hidden",paddingRight:"0px"},paddingFix:!1,className:Ee().modalContent,children:(0,r.jsxs)("div",{className:Ee().container,children:[(0,r.jsx)("div",{className:Ee().sidebarContainer,children:(0,r.jsx)(Ne,{})}),(0,r.jsxs)("div",{className:Ee().contentContainer,children:[(0,r.jsx)(o.olH,{onClick:n,className:Ee().closeButton}),(0,r.jsx)(pe,{isNUXFlow:c,onClose:n})]})]})})})}var ge=function(e){var t=e.invite;return(0,r.jsxs)("div",{className:Ee().container,children:[(0,r.jsx)("div",{className:Ee().sidebarContainer,children:(0,r.jsx)(Ne,{})}),(0,r.jsx)("div",{className:Ee().contentContainer,children:(0,r.jsx)(pe,{invite:t})})]})}},571680:(e,t,n)=>{"use strict";n.d(t,{MK:()=>r,FF:()=>a,mx:()=>i,X2:()=>o,EW:()=>l});var r,a,i,o,l;!function(e){e.UNKNOWN="unknown";e.ANY="any";e.INVITE="invite";e.ORGANIC="organic_registration";e.ORGANIC_MARKETING="organic_marketing";e.ORGANIC_GUILD_TEMPLATES="organic_guild_template"
;e.CREATE_GUILD="create_guild"}(r||(r={}));!function(e){e.AGE_GATE="age_gate";e.AGE_GATE_UNDERAGE="age_gate_underage"}(a||(a={}));!function(e){e.CLAIM_ACCOUNT="claim_account";e.CLAIM_ACCOUNT_SUCCESS="claim_account_success"}(i||(i={}));!function(e){e.GUILD_TEMPLATES="guild_templates";e.GUILD_CREATE="guild_create";e.CREATION_INTENT="creation_intent";e.CHANNEL_PROMPT="channel_prompt";e.JOIN_GUILD="join_guild";e.SUCCESS="create_success"}(o||(o={}));!function(e){e.NUF_STARTED="nuf_started";e.AGE_GATE="age_gate";e.NUF_COMPLETE="nuf_complete";e.HUB_CONNECTION="hub_connection"}(l||(l={}))},415879:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var r=n(38736),a=n(630631),i=n(296602),o=n(652591),l=n(571680),s=n(2590);function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){c(e,t,n[t])}))}return e}function f(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(a[n]=e[n])}return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r]
;t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}}return a}function h(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}var m=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},p="UserFlowAnalyticsStore_current",v="UserFlowAnalyticsStore";new i.Z("UserFlowAnalytics");function _(e){if(e===l.MK.UNKNOWN)return null;var t=a.Z.get("".concat(v,"-").concat(e));if(null==t)return null;var n=t.version,r=d(t,["version"]);return 1!==n?null:r}var N=(0,r.Z)((function(e,t){return c({flows:{},currentFlow:null},"activeFlow",(function(){var e,n=null!==(e=t().currentFlow)&&void 0!==e?e:a.Z.get(p);if(null==n)return null;var r=t().flows[n],i=null!=r?r:_(n)
;return null!=(null==i?void 0:i.currentStep)?n:null}))}));N.subscribe((function(e){var t;if(null!=e){!function(e){if(e.type!==l.MK.UNKNOWN){var t="".concat(v,"-").concat(e.type);if(e.ended){a.Z.remove(t);a.Z.remove(p)}else{a.Z.set("".concat(v,"-").concat(e.type),f(u({},e),{version:1}));a.Z.set(p,e.type)}}}(e);o.default.track(s.rMx.NUO_TRANSITION,{flow_type:e.type,from_step:e.lastStep,to_step:e.currentStep,seconds_on_from_step:"function"!=typeof(null===(t=e.lastTimestamp)||void 0===t?void 0:t.getTime)?0:(e.currentTimestamp.getTime()-e.lastTimestamp.getTime())/1e3},{flush:!0});if(e.ended){var n=u({},N.getState().flows);delete n[e.type];N.setState({flows:n,currentFlow:null})}}}),(function(e){return null!=e.currentFlow?e.flows[e.currentFlow]:void 0}));function y(e,t){var n=N.getState().flows,r=n[e],a=d(n,[e].map(h)),i=null!=r?r:_(e);if(null!=(null==i?void 0:i.currentStep)){if(i.currentStep===t)return;0}N.setState({flows:f(u({},a),c({},e,{type:e,lastStep:null,lastTimestamp:null,
currentStep:t,currentTimestamp:new Date,skipped:!1})),currentFlow:e})}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e;if(e===l.MK.ANY){var a;r=null!==(a=N.getState().activeFlow())&&void 0!==a?a:l.MK.UNKNOWN}var i=N.getState().flows,o=i[r],s=d(i,[r].map(h)),m=null!=o?o:_(r);null!=m&&null!=m.currentStep&&m.currentStep!==t&&N.setState({flows:f(u({},s),c({},r,f(u({},m),{lastStep:m.currentStep,lastTimestamp:m.currentTimestamp,currentStep:t,currentTimestamp:new Date,ended:n}))),currentFlow:r})}function E(){return null!=N.getState().activeFlow()}const I={flowStart:y,flowStepOrStart:function(e,t){E()?b(e,t):y(e,t)},flowStep:b,hasActiveFlow:E}}}]);
//# sourceMappingURL=7bdbb892dc47c86385a8.js.map