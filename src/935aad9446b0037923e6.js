"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[58969],{358969:(n,e,t)=>{t.d(e,{O2:()=>z,Eg:()=>J,W3:()=>K,ES:()=>nn,kF:()=>en,eV:()=>un,ur:()=>on,iM:()=>ln,xw:()=>an,IN:()=>cn,Bs:()=>fn,nP:()=>sn,AJ:()=>dn,MC:()=>hn,Q:()=>gn,mX:()=>vn,r_:()=>pn,J$:()=>yn,ql:()=>bn,Vm:()=>In,jR:()=>On,eZ:()=>Zn,XZ:()=>_n,ku:()=>Sn,n2:()=>En,vP:()=>Tn,M1:()=>wn});var r=t(667294),u=t(496486),o=t.n(u),i=t(797186),l=t(920883),a=t(842227),c=t(202351),f=t(418705),s=t(744564),d=t(496916),h=t(896490),g=t(249139),v=t(804808),p=t(550131),m=t(18882),y=t(536945),b=t(879116),I=t(591684),O=t(217973),Z=t(61209),_=t(797815),S=t(984216),E=t(567403),T=t(682776),w=t(717091),P=t(840922),A=t(788169),j=t(473903),M=t(72580),C=t(372518),R=t(866893),N=t(99440),L=t(572615),U=t(955089),k=t(524600),F=t(474167),G=t(508778),D=t(2590),x=t(897196),Y=t(379364);function V(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function B(n,e,t,r,u,o,i){try{
var l=n[o](i),a=l.value}catch(n){t(n);return}l.done?e(a):Promise.resolve(a).then(r,u)}function H(n){return function(){var e=this,t=arguments;return new Promise((function(r,u){var o=n.apply(e,t);function i(n){B(o,r,u,i,l,"next",n)}function l(n){B(o,r,u,i,l,"throw",n)}i(void 0)}))}}function W(n,e,t){e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t;return n}function Q(n,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})));t.push.apply(t,r)}return t}(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}));return n}function q(n){return function(n){if(Array.isArray(n))return V(n)}(n)||function(n){
if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(!n)return;if("string"==typeof n)return V(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return V(n,e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=function(n,e){var t,r,u,o,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(u=2&o[0]?r.return:o[0]?r.throw||((u=r.return)&&u.call(r),
0):r.next)&&!(u=u.call(r,o[1])).done)return u;(r=0,u)&&(o=[2&o[0],u.value]);switch(o[0]){case 0:case 1:u=o;break;case 4:i.label++;return{value:o[1],done:!1};case 5:i.label++;r=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(u=i.trys,u=u.length>0&&u[u.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!u||o[1]>u[0]&&o[1]<u[3])){i.label=o[1];break}if(6===o[0]&&i.label<u[1]){i.label=u[1];u=o;break}if(u&&i.label<u[2]){i.label=u[2];i.ops.push(o);break}u[2]&&i.ops.pop();i.trys.pop();continue}o=e.call(n,i)}catch(n){o=[6,n];r=0}finally{t=u=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},z=(0,g.Z)({id:"2023-01_forums_non_community",label:"Forum non-community",kind:"guild",defaultConfig:{enabled:!1},treatments:[{id:1,label:"On",config:{enabled:!0}}]});function $(n){var e=(0,c.e7)([E.Z],(function(){return E.Z.getGuild(n)}));return z.useExperiment({guildId:n
}).enabled||Boolean((null==e?void 0:e.hasFeature(D.oNc.COMMUNITY))||(null==e?void 0:e.hasFeature(D.oNc.INTERNAL_EMPLOYEE_ONLY)))}function J(n){return z.getCurrentConfig({guildId:n}).enabled}function K(n){return $(n)}function nn(n,e,t){var u=(0,c.e7)([y.Z],(function(){return y.Z.hasLoaded(n.guild_id)}));r.useEffect((function(){if(u){var r=R.Z.getThreadIds(n.id,e,t),o=U.Z.getThreadIdsMissingCounts(n.guild_id,r).filter((function(n){return(0,F.nU)(n,[w.ZP])})).slice(0,180).map((function(n){return{threadId:n,ackMessageId:w.ZP.getTrackedAckMessageId(n)}}));o.length>0&&s.Z.dispatch({type:"REQUEST_FORUM_UNREADS",guildId:n.guild_id,channelId:n.id,threads:o})}}),[n.id,n.guild_id,u,t,e])}function en(n){return(0,c.e7)([y.Z,Z.Z],(function(){var e=o()(y.Z.getThreadsForParent(n.guild_id,n.parent_id)).keys().filter((function(n){var e;return!0===(null===(e=Z.Z.getChannel(n))||void 0===e?void 0:e.hasFlag(x.zZ.PINNED))})).head();return Z.Z.getChannel(e)}))}function tn(n){var e=null==n?void 0:n.parent_id
;return(0,c.cj)([Z.Z],(function(){var n,t=Z.Z.getChannel(e);return(null!==(n=null==t?void 0:t.availableTags)&&void 0!==n?n:[]).reduce((function(n,e){return Q(function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))));r.forEach((function(e){W(n,e,t[e])}))}return n}({},n),W({},e.id,e))}),{})}),[e])}var rn=[];function un(n){var e=tn(n);return r.useMemo((function(){var t,r,u;return null!==(u=null===(r=null==n||null===(t=n.appliedTags)||void 0===t?void 0:t.map((function(n){return e[n]})))||void 0===r?void 0:r.filter(M.lm))&&void 0!==u?u:rn}),[e,null==n?void 0:n.appliedTags])}function on(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=un(n);return r.useMemo((function(){return[t.slice(0,e),Math.max(0,t.length-e)]}),[t,e])}function ln(n,e){var t=(0,
c.Wu)([j.default],(function(){return e.map((function(n){return j.default.getUser(n)})).filter(M.lm)}));r.useEffect((function(){t.forEach((function(e){S.Z.requestMember(n.guild_id,e.id)}))}),[]);return t}function an(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G.R6.DURATION_AGO,u=r.useMemo((function(){return a.default.extractTimestamp(n.id)}),[n.id]),o=(0,O.Ok)(n),i=r.useMemo((function(){return(0,F.Uw)(e,t)}),[e,t]);return r.useMemo((function(){return e===l.z.CREATION_DATE?(0,O.Ye)(u,i):(0,O.Ye)(o,i)}),[o,e,u,i])}function cn(n){var e;return r.useMemo((function(){return o().maxBy(null!==(e=null==n?void 0:n.reactions)&&void 0!==e?e:[],(function(n){return Math.max(n.burst_count,n.count)}))}),[null==n?void 0:n.reactions])}function fn(n){var e=null==n?void 0:n.defaultReactionEmoji,t=(0,c.e7)([_.Z],(function(){return null!=(null==e?void 0:e.emojiId)?_.Z.getUsableCustomEmojiById(e.emojiId):null}));return null==e?null:null!=e.emojiId&&null!=t?{id:e.emojiId,name:t.name,
animated:t.animated}:null!=e.emojiName?{id:e.emojiId,name:e.emojiName,animated:!1}:null}function sn(n){var e,t=(0,c.e7)([I.Z],(function(){return null!==(e=I.Z.getCount(n.id))&&void 0!==e?e:0})),r=(0,b.lE)(t,n.id),u=(0,c.e7)([w.ZP],(function(){return(0,F.nU)(n.id,[w.ZP])})),o=(0,c.e7)([U.Z],(function(){if(!u)return null;var e=U.Z.getCount(n.id);if(null!=e&&e>0){var r=Math.min(e,t);return r>=Y.dg?"".concat(Y.dg,"+"):r}return"1+"}));return{messageCount:t,isMaxMessageCount:null!=t&&"".concat(t)!==r,messageCountText:r,unreadCount:o}}function dn(n){var e,t=(0,c.e7)([j.default],(function(){return j.default.getUser(n.ownerId)})),u=(0,c.e7)([L.Z],(function(){var e;return null===(e=L.Z.getMessage(n.id))||void 0===e?void 0:e.firstMessage})),o=(0,p.Sw)(null!==(e=null==u?void 0:u.author)&&void 0!==e?e:t,n);r.useEffect((function(){null!=n.ownerId&&S.Z.requestMember(n.guild_id,n.ownerId)}),[n.guild_id,n.ownerId]);return{user:t,author:o}}function hn(n){
var e,t,r=j.default.getUser(n.ownerId),u=null===(e=L.Z.getMessage(n.id))||void 0===e?void 0:e.firstMessage;return{user:r,author:(0,p.ij)(null!==(t=null==u?void 0:u.author)&&void 0!==t?t:r,n)}}function gn(n){return(0,c.Wu)([A.Z,j.default,P.Z],(function(){var e=j.default.getCurrentUser();return o()(A.Z.getTypingUsers(n.id)).keys().filter((function(n){return n!==(null==e?void 0:e.id)})).reject(P.Z.isBlocked).map((function(n){return j.default.getUser(n)})).filter(M.lm).map((function(n){return n.id})).value()}))}function vn(n){var e=n.firstMessage,t=n.formatInline,u=void 0===t||t,o=n.noStyleAndInteraction,i=void 0===o||o,l=r.useMemo((function(){return null!=(null==e?void 0:e.content)&&""!==e.content?(0,v.ZP)(e,{formatInline:u,noStyleAndInteraction:i,allowHeading:!0,allowList:!0}):{hasSpoilerEmbeds:!1,content:null}}),[e,u,i]),a=l.hasSpoilerEmbeds;return{hasSpoilerEmbeds:a,content:l.content,firstMedia:(0,N.eL)(e,a),firstMediaIsEmbed:(0,N.vg)(e,a)}}function pn(n){return(0,
c.e7)([T.Z],(function(){return T.Z.can(D.Plq.MANAGE_CHANNELS,n)}))}var mn={isNew:!1,hasUnreads:!1};function yn(n){return(0,c.cj)([E.Z,w.ZP],(function(){var e,t=E.Z.getGuild(null!==(e=n.getGuildId())&&void 0!==e?e:"");return null==t?mn:(0,F.FS)(n,t,[w.ZP])}))}function bn(n){return r.useMemo((function(){return null==n||null==n.template?"":n.template.trim()}),[n])}function In(n){var e=(0,c.e7)([T.Z],(function(){return T.Z.can(D.Plq.MANAGE_THREADS,n)}));return r.useMemo((function(){var t,r=q(null!==(t=n.availableTags)&&void 0!==t?t:[]);e||(r=r.filter((function(n){return!n.moderated})));return r}),[e,n.availableTags])}function On(n){return(0,c.e7)([T.Z],(function(){return T.Z.can(D.Plq.READ_MESSAGE_HISTORY,n)}))}function Zn(n){return(0,c.e7)([T.Z],(function(){return T.Z.can(D.Plq.READ_MESSAGE_HISTORY,n)}))}function _n(n){var e=n.channelId;return(0,c.cj)([k.Z],(function(){return{isSearchLoading:k.Z.getSearchLoading(e),searchQuery:k.Z.getSearchQuery(e),searchResults:k.Z.getSearchResults(e)}
}))}function Sn(n,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=_n({channelId:n.id}),o=u.isSearchLoading,i=u.searchQuery,l=On(n),a=r.useRef(null),c=r.useRef(new Set);r.useEffect((function(){if(null!=i||null==a.current){if(null!=i&&0!==i.length&&!t)if(l){if((a.current!==i||c.current!==e)&&!o){var r=setTimeout(H((function(){return X(this,(function(t){switch(t.label){case 0:a.current=i;c.current=e;t.label=1;case 1:t.trys.push([1,3,,4]);return[4,C.Z.searchForumPosts(n.guild_id,n.id,i,e)];case 2:t.sent();return[3,4];case 3:t.sent();return[3,4];case 4:return[2]}}))})),350);return function(){return clearTimeout(r)}}}else C.Z.clearForumSearch(n.id)}else{C.Z.clearForumSearch(n.id);a.current=null}}),[l,n.guild_id,n.id,t,o,i,e])}function En(n,e){return(0,c.e7)([m.Z,w.ZP,Z.Z],(function(){var t=Z.Z.getChannel(e);if(!(null==t?void 0:t.isForumLikeChannel()))return 0
;var r=m.Z.getActiveJoinedUnreadThreadsForParent(n,e),u=m.Z.getActiveUnjoinedUnreadThreadsForParent(n,e),o=w.ZP.ackMessageId(e),i=Object.values(r).filter((function(n){if(null==o)return!1;var e=w.ZP.lastMessageId(n.channel.id);return null!=e&&e>o})),l=Object.values(u).filter((function(n){if(null==o)return!1;var e=w.ZP.lastMessageId(n.id);return null!=e&&e>o}));return i.length+l.length}))}function Tn(n){var e=n.channel,t=n.sortOrder,u=n.tagFilter,o=n.shouldAutomaticallyAck,i=(0,c.Wu)([R.Z],(function(){return R.Z.getThreadIds(e.id,t,u)})),l=En(e.guild_id,e.id),a=(0,c.e7)([R.Z],(function(){return o&&(l>0||R.Z.getCanAckThreads())}),[o,l]);r.useEffect((function(){a&&(0,d.U6)(e)}),[e,a]);return i}function wn(n){var e=pn(n),t=(0,h.un)(f.z$.FORUM_CHANNEL_GRID_VIEW_UPSELL),u=$(n.guild_id),o=r.useRef(n.defaultForumLayout===i.X.DEFAULT||null==n.defaultForumLayout),l=(0,c.cj)([y.Z,L.Z,R.Z],(function(){var e=n.getGuildId();if(null==e)return{meetsThreshold:!1,loading:!0};if(!y.Z.hasLoaded(e))return{
meetsThreshold:!1,loading:!0};var t=R.Z.getCurrentThreadIds();if(0===t.length)return{meetsThreshold:!1,loading:!0};var r=t.map((function(n){return L.Z.getMessage(n)})),u=!r.some((function(n){return n.loaded}));if(u)return{meetsThreshold:!1,loading:!0};var o=r.map((function(n){return n.firstMessage})).filter(M.lm);return 0===o.length?{meetsThreshold:!1,loading:!1}:{meetsThreshold:o.filter((function(n){return n.attachments.some(N.As)})).length/o.length>.7,loading:u}})),a=l.loading,s=l.meetsThreshold,d=!t&&e&&u&&o.current;return{showGridViewUpsell:d,shouldAutoEnableGridView:s&&d,gridViewUpsellLoading:a&&d}}},99440:(n,e,t)=>{t.d(e,{dE:()=>d,As:()=>v,zy:()=>b,eL:()=>I,vg:()=>O,CB:()=>Z,cp:()=>_});var r=t(591684),u=t(769321),o=t(61209),i=t(598123),l=t(473903),a=t(72580),c=t(493254);function f(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function s(n){return function(n){if(Array.isArray(n))return f(n)}(n)||function(n){
if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(!n)return;if("string"==typeof n)return f(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return f(n,e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(n,e){if(null!=n&&null!=n.embeds[0]){var t=n.embeds[0].color;return null!=t&&"#ffffff"===t.toLowerCase()||e?void 0:t}}function h(n){if(null==n)return!1;var e=n.filename,t=n.height,r=n.width;return c.IQ.test(e)&&null!=t&&t>0&&null!=r&&r>0}function g(n){return null!=n&&(null!=n&&c.XH.test(n.filename)&&null!=n.proxy_url)}function v(n){return h(n)||g(n)}function p(n){return c.XH.test(n)}function m(n){
return function(n){if(!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.x4.getSetting()))return[];var e=null==n?void 0:n.attachments;return null==n||null==e?[]:e.filter(v).map((function(n){var e=n.proxy_url,t=n.url,r=n.description,u=n.spoiler,o=n.width,i=n.height,l=n.filename;if(null==o||null==i)return null;var a=p(l);return{src:a?"".concat(e,"?format=jpeg"):null!=e?e:t,width:o,height:i,spoiler:null!=u&&u,alt:r,isVideo:a}})).filter(a.lm)}(n,u.x4.useSetting())}function y(n,e){var t=u.RS.useSetting(),r=u.NA.useSetting();if(null==n)return[];var o=n.embeds;return t&&r&&null!=o?o.map((function(n){var t,r=null!==(t=n.image)&&void 0!==t?t:n.thumbnail;null==r&&null!=n.images&&(r=n.images[0]);if(null!=r&&null!=r.url){var u=r.height,o=r.proxyURL,i=r.url,l=r.width,a=null!=o&&c.XH.test(o);return{src:null!=o&&""!==o?o:i,height:u,width:l,spoiler:e,isVideo:a}}})).filter(a.lm):[]}function b(n,e){var t=m(n),r=y(n,e);return s(t).concat(s(r))}function I(n,e){var t,r,u=m(n),o=y(n,e)
;return null!==(r=null!==(t=u[0])&&void 0!==t?t:o[0])&&void 0!==r?r:null}function O(n,e){var t=m(n),r=y(n,e);return null==t[0]&&null!=r[0]}function Z(n,e){var t,u=o.Z.getChannel(e);if(null==u)return!1;var a=i.Z.getMessage(u.id,u.id);return null!=a&&(n.length>0&&null!=n.find((function(n){return n.isImage||n.isVideo}))&&u.isForumPost()&&u.ownerId===(null===(t=l.default.getCurrentUser())||void 0===t?void 0:t.id)&&0===r.Z.getCount(u.id)&&(0===a.attachments.length||null==a.attachments.find((function(n){return h(n)||g(n)}))))}function _(n){return n.reduce((function(n,e){return{containsVideo:n.containsVideo||e.isVideo,containsGif:n.containsGif||c.LR.test(e.src)}}),{containsVideo:!1,containsGif:!1})}},955089:(n,e,t)=>{t.d(e,{Z:()=>b});var r=t(441143),u=t.n(r),o=t(202351),i=t(744564),l=t(536945),a=t(61209),c=t(717091);function f(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function s(n){s=Object.setPrototypeOf?Object.getPrototypeOf:function(n){
return n.__proto__||Object.getPrototypeOf(n)};return s(n)}function d(n,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):e}function h(n,e){h=Object.setPrototypeOf||function(n,e){n.__proto__=e;return n};return h(n,e)}var g=function(n){return n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n};function v(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var u=s(this).constructor;t=Reflect.construct(r,arguments,u)}else t=r.apply(this,arguments);return d(this,t)}}var p={},m=new Set;var y=function(n){!function(n,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}});e&&h(n,e)}(t,n);var e=v(t);function t(){f(this,t);return e.apply(this,arguments)}var r=t.prototype;r.initialize=function(){this.waitFor(l.Z,a.Z,c.ZP)};r.getCount=function(n){return p[n]};r.getThreadIdsMissingCounts=function(n,e){u()(l.Z.hasLoaded(n),"must wait for THREAD_LIST_SYNC before calling this");return e.filter((function(n){return!(n in p)&&!m.has(n)}))};r.__getLocalVars=function(){return{counts:p,loadingThreadIds:m}};return t}(o.ZP.Store);y.displayName="ForumPostUnreadCountStore";const b=new y(i.Z,{CONNECTION_OPEN:function(){p={};m=new Set},THREAD_CREATE:function(n){var e=n.channel;if(!n.isNewlyCreated)return!1;if(!l.Z.hasLoaded(e.guild_id))return!1;p[e.id]=0},MESSAGE_CREATE:function(n){var e=n.channelId,t=n.optimistic,r=n.isPushNotification;if(t||r)return!1;if(!(e in p))return!1
;p[e]++},FORUM_UNREADS:function(n){n.threads.forEach((function(n){null!=n.count&&(p[n.threadId]=n.count)}))},MESSAGE_ACK:function(n){var e=n.channelId;if(!(e in p)){var t=a.Z.getChannel(e),r=a.Z.getChannel(null==t?void 0:t.parent_id);if(!(null==r?void 0:r.isForumLikeChannel()))return!1}p[e]=c.ZP.getUnreadCount(e)},REQUEST_FORUM_UNREADS:function(n){n.threads.forEach((function(n){var e=n.threadId;return m.add(e)}))}})},788169:(n,e,t)=>{t.d(e,{Z:()=>E});var r=t(202351),u=t(281110),o=t(744564),i=t(736818),l=t(539273),a=t(2590);function c(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function f(n,e,t){e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t;return n}function s(n){s=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)};return s(n)}function d(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))));r.forEach((function(e){f(n,e,t[e])}))}return n}function h(n,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):e}function g(n,e){g=Object.setPrototypeOf||function(n,e){n.__proto__=e;return n};return g(n,e)}var v=function(n){return n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n};function p(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var u=s(this).constructor;t=Reflect.construct(r,arguments,u)
}else t=r.apply(this,arguments);return h(this,t)}}var m,y={},b=Object.freeze({});function I(n){var e;return null!==(e=y[n])&&void 0!==e?e:b}function O(n){var e=n.channelId,t=n.userId,r=d({},I(e));clearTimeout(r[t]);r[t]=function(n,e){return setTimeout((function(){o.Z.dispatch({type:"TYPING_STOP",channelId:n,userId:e})}),a.I2i)}(e,t);y[e]=r}function Z(n){var e=n.channelId,t=n.userId,r=y[e];if(null==r||null==r[t])return!1;var u=d({},r);clearTimeout(u[t]);delete u[t];y[e]=u}function _(){y={}}var S=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}});e&&g(n,e)}(t,n);var e=p(t);function t(){c(this,t);return e.apply(this,arguments)}var r=t.prototype;r.getTypingUsers=function(n){return I(n)};r.isTyping=function(n,e){return null!=I(n)[e]};r.__getLocalVars=function(){return{typingUsersByChannel:y,localTypingDelay:m,
EMPTY_TYPING:b}};return t}(r.ZP.Store);S.displayName="TypingStore";const E=new S(o.Z,{TYPING_START:O,TYPING_STOP:Z,TYPING_START_LOCAL:function(n){var e=n.channelId,t=i.default.getId();if(null==t)return!1;if(null!=m&&m.channelId!==e){null!=m.timeout&&clearTimeout(m.timeout);m=null}var r=Date.now(),c=.8*a.I2i;if(null!=m&&(null!=m.timeout||m.prevSend+c>r))return!1;var f=null==m||m.prevSend>r-2*c?a.WQ8:0,s=setTimeout((function(){if(null!=m&&m.channelId===e&&t===i.default.getId()&&null!=m.timeout){m.timeout=null;(function(n){var e=I(n);return e===b?0:Object.keys(e).length})(e)>a.WiX||u.Z.post({url:a.ANM.TYPING(e),oldFormErrors:!0}).then((function(n){if(200===n.status){var t,r,u=null!==(t=n.body.message_send_cooldown_ms)&&void 0!==t?t:0,i=null!==(r=n.body.thread_create_cooldown_ms)&&void 0!==r?r:0;u>0&&o.Z.dispatch({type:"SLOWMODE_SET_COOLDOWN",channelId:e,slowmodeType:l.S.SendMessage,cooldownMs:u});i>0&&o.Z.dispatch({type:"SLOWMODE_SET_COOLDOWN",channelId:e,slowmodeType:l.S.CreateThread,
cooldownMs:i})}}))}}),f);m={channelId:e,timeout:s,prevSend:r};return O({channelId:e,userId:t})},TYPING_STOP_LOCAL:function(n){var e=n.channelId,t=i.default.getId();if(null==t)return!1;if(null!=m&&m.channelId===e&&null!=m.timeout){clearTimeout(m.timeout);m=null;return Z({channelId:e,userId:t})}return!1},CONNECTION_OPEN:_,OVERLAY_INITIALIZE:_,MESSAGE_CREATE:function(n){var e=n.channelId,t=n.message.author;n.optimistic&&function(n){if(null==m||m.channelId!==n)return!1;null!=m.timeout&&clearTimeout(m.timeout);m=null}(e);return Z({channelId:e,userId:t.id})}})}}]);
//# sourceMappingURL=935aad9446b0037923e6.js.map