"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[33353],{577635:(e,n,t)=>{t.d(n,{WG:()=>p,pD:()=>m,Tj:()=>h,ZD:()=>y});var r=t(999357),o=t(281110),a=t(816251),i=(t(120415),t(801809)),l=t(2590),s=t(473708);function c(e,n,t,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){t(e);return}l.done?n(s):Promise.resolve(s).then(r,o)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){c(a,r,o,i,l,"next",e)}function l(e){c(a,r,o,i,l,"throw",e)}i(void 0)}))}}var f=function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),
0):r.next)&&!(o=o.call(r,a[1])).done)return o;(r=0,o)&&(a=[2&a[0],o.value]);switch(a[0]){case 0:case 1:o=a;break;case 4:i.label++;return{value:a[1],done:!1};case 5:i.label++;r=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1];o=a;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(a);break}o[2]&&i.ops.pop();i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e];r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};function p(){return d.apply(this,arguments)}function d(){return(d=u((function(){return f(this,(function(e){switch(e.label){case 0:return[4,o.Z.get({url:l.ANM.BUG_REPORTS})];case 1:return[2,e.sent().body]}}))}))).apply(this,arguments)}function m(e){var n,t
;return null!==(t=null!==(n=null==e?void 0:e.name)&&void 0!==n?n:""+(null==e?void 0:e.squad))&&void 0!==t?t:""}function h(){return[{title:s.Z.Messages.BUG_REPORT_PRIORITY_CRITICAL_TITLE,description:s.Z.Messages.BUG_REPORT_PRIORITY_CRITICAL_DESCRIPTION.format(),emoji:"801497159479722084",value:0},{title:s.Z.Messages.BUG_REPORT_PRIORITY_HIGH_TITLE,description:s.Z.Messages.BUG_REPORT_PRIORITY_HIGH_DESCRIPTION.format(),emoji:"410336837563973632",value:1},{title:s.Z.Messages.BUG_REPORT_PRIORITY_LOW_TITLE,description:s.Z.Messages.BUG_REPORT_PRIORITY_LOW_DESCRIPTION.format(),emoji:"841420679643529296",value:2},{title:s.Z.Messages.BUG_REPORT_PRIORITY_VERY_LOW_TITLE,description:s.Z.Messages.BUG_REPORT_PRIORITY_VERY_LOW_DESCRIPTION.format(),emoji:"827645852352512021",value:3}]}function y(e,n,t){return v.apply(this,arguments)}function v(){return(v=u((function(e,n,t){var o,s,c,u,p;return f(this,(function(f){switch(f.label){case 0:c=[{name:"name",value:e.name},{name:"priority",
value:"".concat(e.priority)},{name:"override_platform_information",value:"".concat(n.overridePlatformInformation)}];""!==e.description&&c.push({name:"description",value:e.description});""!==e.url&&c.push({name:"external_url",value:e.url});null!=(u=null===(o=e.feature)||void 0===o?void 0:o.asana_inbox_id)&&""!==u&&c.push({name:"asana_inbox_id",value:"".concat(u)});null!=(p=null===(s=e.feature)||void 0===s?void 0:s.name)&&""!==p&&c.push({name:"feature_name",value:p});if(n.overridePlatformInformation){c.push({name:"device",value:n.device});c.push({name:"os",value:n.operatingSystem});c.push({name:"os_version",value:n.operatingSystemVersion});c.push({name:"client_version",value:n.clientVersion});c.push({name:"client_build_number",value:n.clientBuildNumber});c.push({name:"release_channel",value:window.GLOBAL_ENV.RELEASE_CHANNEL});c.push({name:"locale",value:n.locale})}(0,a.E_)(l.GU0.WEB_APP);f.label=1;case 1:f.trys.push([1,3,,4]);return[4,i.Z.post({url:l.ANM.BUG_REPORTS,attachments:t,
fields:c,trackedActionData:{event:r.a9.BUG_REPORT_SUBMIT,properties:{priority:e.priority,asana_inbox_id:u}}})];case 2:return[2,f.sent()];case 3:return[2,f.sent()];case 4:return[2]}}))}))).apply(this,arguments)}},631183:(e,n,t)=>{t.d(n,{Z:()=>f});var r=t(785893),o=t(667294),a=t(294184),i=t.n(a),l=t(707961),s=t(668159),c=t(981099),u=t.n(c);function f(e){var n=e.onClick,t=e.children,a=e.tooltip,c=e.dangerous,f=void 0!==c&&c,p=e.className;return(0,r.jsx)(l.ua7,{text:a,hideOnClick:!0,children:function(e){var l=e.onMouseEnter,c=e.onMouseLeave,d=e.onClick;return(0,r.jsx)(s.zx,{onMouseEnter:l,onMouseLeave:c,onClick:function(e){e.stopPropagation();null==d||d();n(e)},dangerous:f,"aria-label":a,className:p,children:o.Children.map(t,(function(e){return o.isValidElement(e)?o.cloneElement(e,{className:i()(e.props.className,u().actionBarIcon)}):e}))})}})}},873506:(e,n,t)=>{t.d(n,{q:()=>m,Z:()=>M})
;var r=t(785893),o=t(667294),a=t(294184),i=t.n(a),l=t(457217),s=t(707961),c=t(567867),u=t(668159),f=t(930948);function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function d(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){a.push(r.value);if(n&&a.length===n)break}}catch(e){l=!0;o=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw o}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return p(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p(e,n)}(e,n)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m,h=t(2590),y=t(473708),v=t(651898),b=t.n(v);function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function O(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){O(e,n,t[n])}))}return e}function E(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e)
;n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function S(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++){t=a[r];n.indexOf(t)>=0||(o[t]=e[t])}return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){t=a[r];n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}}return o}function P(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){a.push(r.value);if(n&&a.length===n)break}}catch(e){l=!0;o=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw o}}return a}
}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return g(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e[e.SMALL=0]="SMALL";e[e.MEDIUM=1]="MEDIUM"}(m||(m={}));function T(e){e.stopPropagation()}function x(e,n){var t=e.id,a=e.channelId,p=e.className,v=e.children,g=e.actions,x=e.handleEditModal,M=e.keyboardModeEnabled,w=e.onKeyDown,I=e.draftType,_=e.size,A=void 0===_?m.MEDIUM:_,R=(0,l.JA)(t),N=R.onFocus,L=S(R,["onFocus"]),C=function(e,n){var t=d((0,o.useState)(!1),2),r=t[0],a=t[1];return{handleFocus:(0,o.useCallback)((function(n){
(n.target===n.currentTarget||n.currentTarget.contains(document.activeElement))&&a(!0);null!=e&&e(n)}),[e]),handleBlur:(0,o.useCallback)((function(e){e.target!==e.currentTarget&&e.currentTarget.contains(document.activeElement)||a(!1);null!=n&&n(e)}),[n]),isFocused:r}}(N),D=C.handleFocus,Z=C.handleBlur,k=P(o.useState(!1),2),U=k[0],B=k[1],G=A===m.SMALL,F=null!=g&&(!G||U);return(0,r.jsx)(s.tEY,{children:(0,r.jsx)("li",E(j({},L),{onFocus:D,onBlur:Z,onKeyDown:function(e){if(M){switch(e.which){case h.yXg.D:e.preventDefault();c.Z.remove(a,t,I);return;case h.yXg.E:if(null!=x){e.preventDefault();x(e)}return;case h.yXg.BACKSPACE:if(e.ctrlKey){e.preventDefault();c.Z.clearAll(a,I)}else{e.preventDefault();c.Z.remove(a,t,I)}return;case h.yXg.ARROW_UP:if(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)return;e.preventDefault();f.S.dispatchToLastSubscribed(h.CkL.FOCUS_MESSAGES,{atEnd:!0})}null==w||w(e)}},className:i()(b().upload,p),ref:n,children:(0,r.jsxs)("div",{className:b().uploadContainer,
onMouseEnter:function(){G&&B(!0)},onMouseLeave:function(){G&&B(!1)},children:[v,F?(0,r.jsx)("div",{className:b().actionBarContainer,children:(0,r.jsx)("div",{className:b().actionBar,onContextMenu:T,"aria-label":y.Z.Messages.ATTACHMENT_UTILITIES,children:(0,r.jsx)(u.ZP,{className:i()(O({},b().miniPopover,G)),children:g})})}):null]})}))})}const M=o.forwardRef(x)},115549:(e,n,t)=>{t.d(n,{r:()=>Q,Z:()=>ee});var r=t(785893),o=t(667294),a=t(294184),i=t.n(a),l=t(707961),s=t(567867),c=t(474717),u=t(855483),f=t(545758),p=t(284610),d=t(652591),m=t(120415),h=t(310126),y=t(2590),v=t(473708),b=t(36627),g=t.n(b),O=t(518280),j=t.n(O);function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function S(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function P(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function T(e){
T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return T(e)}function x(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&_(e,n)}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){P(e,n,t[n])}))}return e}function w(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))
;t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function I(e,n){return!n||"object"!==R(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function _(e,n){_=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return _(e,n)}function A(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){a.push(r.value);if(n&&a.length===n)break}}catch(e){l=!0;o=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw o}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return E(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name)
;if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return E(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function N(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=T(e);if(n){var o=T(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return I(this,t)}}var L=104;function C(e){var n,t,a=e.file,l=A(o.useState(),2),s=l[0],c=l[1],u=A(o.useState(!1),2),f=u[0],p=u[1],d=A(o.useState({}),2),m=d[0],h=d[1],y=o.useRef(null)
;o.useEffect((function(){null!=y.current&&p(!1);if(null!=a){var e=URL.createObjectURL(a);c(e);return function(){c(void 0);URL.revokeObjectURL(e)}}}),[a]);o.useLayoutEffect((function(){var e=y.current;null!=e&&(e.onload=function(){var n=e.naturalWidth/e.naturalHeight,t=Math.max(.66,Math.min(n,4));h(1===t?{width:L,height:L}:t>1?{width:L*t,height:void 0}:{width:void 0,height:L/t});p(!0)})}),[]);var v,b,O=Math.max(16,(120-(null!==(t=null===(n=y.current)||void 0===n?void 0:n.width)&&void 0!==t?t:0))/2);return(0,r.jsx)("img",{ref:y,src:s,className:i()(g().icon,P({},g().image,!f)),"aria-hidden":!0,alt:"",style:{width:null!==(v=m.width)&&void 0!==v?v:"initial",height:null!==(b=m.height)&&void 0!==b?b:L,marginLeft:O,marginRight:O,marginTop:null!=m.height?L-m.height-33:-33}})}var D=function(e){x(t,e);var n=N(t);function t(){S(this,t);return n.apply(this,arguments)}t.prototype.render=function(){return this.props.upload.item.platform!==c.ow.WEB?null:this.props.upload.isImage?(0,r.jsx)(C,{
file:this.props.upload.item.file}):(0,r.jsx)("div",{className:i()(g().icon,P({},g()[null!==(e=this.props.upload.classification)&&void 0!==e?e:""],!0))});var e};return t}(o.Component),Z=function(e){x(t,e);var n=N(t);function t(e){S(this,t);var r,o,a,i;(r=n.call(this,e)).cancelAll=function(){s.Z.clearAll(r.props.channelId,r.props.draftType);r.props.onClose()};r.cancel=function(){r.props.onClose()};r.handleTextChange=function(e,n,t){r.setState({textValue:n,richValue:t})};r.handleSubmit=function(){var e=r.props,n=e.upload,t=e.onClose,o=e.onSubmit,a=r.state;o({upload:n,name:a.filename,description:a.description,spoiler:a.hasSpoiler});t()};var l,c,f,d=e.ignoreDraft?"":p.Z.getDraft(r.props.channelId,e.draftType);r.state=w(M({},(0,u.eK)(d)),{textFocused:!0,hasSpoiler:null!==(l=null===(o=e.upload)||void 0===o?void 0:o.spoiler)&&void 0!==l&&l,filename:null!==(c=null===(a=e.upload)||void 0===a?void 0:a.filename)&&void 0!==c?c:"",contentWarningProps:null,
description:null!==(f=null===(i=e.upload)||void 0===i?void 0:i.description)&&void 0!==f?f:""});return r}var a=t.prototype;a.componentDidMount=function(){var e;(null===(e=this.props.upload)||void 0===e?void 0:e.showLargeMessageDialog)&&this.props.upload.item.platform===c.ow.WEB&&d.default.track(y.rMx.OPEN_MODAL,{type:"Upload Large Message",message_content_length:this.props.upload.item.file.size});m.FB&&h.default.focus()};a.shouldComponentUpdate=function(e){return null!=e.upload};a.componentDidUpdate=function(e){var n,t;if((null===(n=e.upload)||void 0===n?void 0:n.filename)!==(null===(t=this.props.upload)||void 0===t?void 0:t.filename)){var r,o;this.setState({filename:null!==(o=null===(r=this.props.upload)||void 0===r?void 0:r.filename)&&void 0!==o?o:""})}};a.render=function(){var e=this,n=this.props,t=n.upload,a=n.transitionState,s=n.messageMaxLength,c=this.state.hasSpoiler;return(0,r.jsxs)(l.Y0X,{"aria-label":v.Z.Messages.ATTACH_FILES,size:l.CgR.DYNAMIC,transitionState:a,
className:i()(g().uploadModal),children:[(0,r.jsxs)("div",{className:g().inner,children:[(0,r.jsxs)("div",{className:i()(g().file,P({},g().expandable,t.isImage)),children:[(0,r.jsx)(D,{upload:t}),(0,r.jsxs)("div",{className:g().description,children:[(0,r.jsx)("div",{className:g().filename,children:t.showLargeMessageDialog?v.Z.Messages.LARGE_MESSAGE_UPLOAD_TITLE_MAX_LENGTH.format({maxLength:s}):t.filename}),t.showLargeMessageDialog?(0,r.jsx)("div",{className:g().subtitle,children:v.Z.Messages.LARGE_MESSAGE_UPLOAD_SUBTITLE}):null]})]}),(0,r.jsx)("div",{className:g().comment,children:(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)("div",{className:g().label,children:(0,r.jsx)("span",{children:v.Z.Messages.UPLOAD_AREA_FILENAME})}),(0,r.jsx)(l.oil,{className:i()(g().channelTextAreaUpload,j().marginTop8),value:this.state.filename,onChange:function(n){return e.setState({filename:n})},onKeyDown:function(n){if(n.which===y.yXg.ENTER)return e.handleSubmit()}}),t.isImage?(0,r.jsxs)(o.Fragment,{
children:[(0,r.jsx)("div",{className:g().label,children:(0,r.jsx)("span",{children:v.Z.Messages.ATTACHMENT_MODAL_IMAGE_DESCRIPTION_LABEL})}),(0,r.jsx)(l.oil,{className:i()(g().channelTextAreaUpload,j().marginTop8),placeholder:v.Z.Messages.ATTACHMENT_MODAL_IMAGE_DESCRIPTION_PLACEHOLDER,value:this.state.description,onChange:function(n){return e.setState({description:n})},onKeyDown:function(n){if(n.which===y.yXg.ENTER)return e.handleSubmit()}})]}):null,(0,r.jsx)(l.XZJ,{className:j().marginBottom20,value:c,onChange:function(n,t){return e.setState({hasSpoiler:t})},children:(0,r.jsx)(l.xvT,{variant:"text-sm/normal",children:v.Z.Messages.SPOILER_MARK_SELECTED})})]})})]}),(0,r.jsx)("div",{className:g().footer,children:(0,r.jsxs)("div",{className:i()(g().hasSpoilers,g().footerRightAlign),children:[(0,r.jsx)(l.zxk,{type:"button",look:l.zxk.Looks.LINK,color:l.zxk.Colors.PRIMARY,onClick:this.cancel,children:(0,r.jsx)("span",{children:v.Z.Messages.CANCEL})}),(0,r.jsx)(l.zxk,{type:"submit",
onClick:this.handleSubmit,children:(0,r.jsx)("span",{children:v.Z.Messages.ATTACHMENT_MODAL_SAVE})})]})})]})};return t}(o.Component);function k(e){var n=(0,f.Z)();return e.upload.item.platform!==c.ow.WEB?null:(0,r.jsx)(Z,w(M({},e),{file:e.upload.item.file,messageMaxLength:n}))}var U=t(507488),B=t(532378),G=t(310246),F=t(472034),H=t(813749),z=t(631183),Y=t(873506),W=t(288514),K=t.n(W);function V(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function X(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function q(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function $(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){a.push(r.value);if(n&&a.length===n)break}}catch(e){l=!0;o=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw o}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return V(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return V(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e){
var n=e.file,t=e.alt,a=e.spoiler,l=e.size,s=void 0===l?Y.q.MEDIUM:l,c=e.onMouseEnter,u=$(o.useState(!1),2),f=u[0],p=u[1],d=$(o.useState(),2),m=d[0],h=d[1],y=o.useRef(null),b=s===Y.q.SMALL;o.useEffect((function(){if(null!=n){var e=URL.createObjectURL(n);h(e);return function(){h(void 0);URL.revokeObjectURL(e)}}}),[n]);return(0,r.jsx)("div",{onMouseEnter:c,className:i()(K().imageContainer,X({},K().imageSmall,b)),children:(0,r.jsx)(U.a.Provider,{value:!a,children:(0,r.jsx)(U.Z,{type:U.Z.Types.ATTACHMENT,onReveal:function(){return p(!0)},className:K().spoilerContainer,children:function(e){var n;return(0,r.jsxs)("div",{className:K().spoilerWrapper,children:[(0,r.jsx)("img",{ref:y,src:m,className:i()(K().image,(n={},X(n,K().spoiler,e),X(n,K().imageSmall,b),n)),"aria-hidden":!0,alt:null!=t?t:""}),(0,r.jsxs)("div",{className:K().tags,children:[null!=t&&""!==t?(0,r.jsx)("span",{className:K().altTag,children:v.Z.Messages.IMAGE_ALT}):null,f&&a?(0,r.jsx)("span",{className:K().altTag,
children:v.Z.Messages.SPOILER}):null]})]})}})})})}function Q(e){var n,t,o=e.upload,a=e.size,l=void 0===a?Y.q.MEDIUM:a,s=e.onMouseEnter,u=l===Y.q.SMALL;return o.isImage&&o.item.platform===c.ow.WEB?(0,r.jsx)(J,{file:o.item.file,alt:o.description,spoiler:o.spoiler,size:l,onMouseEnter:s}):(0,r.jsx)("div",{onMouseEnter:s,className:i()(K().icon,K().imageContainer,(t={},X(t,K()[null!==(n=o.classification)&&void 0!==n?n:""],!0),X(t,K().imageSmall,u),t)),children:(0,r.jsx)("div",{className:K().tags,children:o.spoiler?(0,r.jsx)("span",{className:K().altTag,children:v.Z.Messages.SPOILER}):null})})}function ee(e){var n=e.channelId,t=e.draftType,a=e.upload,c=e.keyboardModeEnabled,u=e.label,f=e.size,d=void 0===f?Y.q.MEDIUM:f,m=e.canEdit,h=void 0===m||m,y=e.hideFileName,b=void 0!==y&&y,g=d===Y.q.SMALL,O=function(e){e.stopPropagation();(0,l.h7j)((function(e){return(0,r.jsx)(k,q(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){X(e,n,t[n])}))}return e}({},e),{draftType:p.d.ChannelMessage,upload:a,channelId:n,onSubmit:function(e){var r=e.name,o=e.description,i=e.spoiler;s.Z.update(n,a.id,t,{filename:r,description:o,spoiler:i})}}))}))};return(0,r.jsxs)(Y.Z,{actions:(0,r.jsxs)(o.Fragment,{children:[h?(0,r.jsx)(z.Z,{className:i()(X({},K().action,g)),tooltip:v.Z.Messages.ATTACHMENT_UTILITIES_SPOILER,onClick:function(){return s.Z.update(n,a.id,t,{spoiler:!a.spoiler})},children:a.spoiler?(0,r.jsx)(G.Z,{className:i()(X({},K().actionBarIcon,g))}):(0,r.jsx)(B.Z,{className:i()(X({},K().actionBarIcon,g))})}):null,h?(0,r.jsx)(z.Z,{className:i()(X({},K().action,g)),tooltip:v.Z.Messages.ATTACHMENT_UTILITIES_MODIFY,onClick:O,children:(0,r.jsx)(F.Z,{className:i()(X({},K().actionBarIcon,g))})}):null,(0,r.jsx)(z.Z,{
className:i()(X({},K().action,g)),tooltip:v.Z.Messages.ATTACHMENT_UTILITIES_REMOVE,onClick:function(){return s.Z.remove(n,a.id,t)},dangerous:!0,children:(0,r.jsx)(H.Z,{className:i()(X({},K().actionBarIcon,g))})})]}),draftType:t,id:a.id,channelId:n,handleEditModal:O,keyboardModeEnabled:c,size:d,className:i()(X({},K().attachmentItemSmall,g)),children:[(0,r.jsx)(Q,{upload:a,size:d}),!b&&(0,r.jsx)("div",{className:K().filenameContainer,children:(0,r.jsx)(l.xvT,{className:K().filename,variant:"text-sm/normal",children:null!=u?u:a.filename})})]})}},545758:(e,n,t)=>{t.d(n,{Z:()=>l});var r=t(202351),o=t(473903),a=t(850841),i=t(2590);function l(){return(0,r.e7)([o.default],(function(){return a.ZP.canUseIncreasedMessageLength(o.default.getCurrentUser())}))?i.en1:i.J6R}},668159:(e,n,t)=>{t.d(n,{Z0:()=>p,zx:()=>d,ZP:()=>m});var r=t(785893),o=(t(667294),t(294184)),a=t.n(o),i=t(707961),l=t(524872),s=t.n(l);function c(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,
writable:!0}):e[n]=t;return e}function u(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function f(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++){t=a[r];n.indexOf(t)>=0||(o[t]=e[t])}return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){t=a[r];n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}}return o}function p(e){var n=e.className;return(0,r.jsx)("div",{className:a()(n,s().separator)})}function d(e){
var n,t=e.onClick,o=e.onContextMenu,l=e.className,p=e.selected,d=void 0!==p&&p,m=e.children,h=e.disabled,y=void 0!==h&&h,v=e.dangerous,b=f(e,["onClick","onContextMenu","className","selected","children","disabled","dangerous"]);return(0,r.jsx)(i.P3F,u(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){c(e,n,t[n])}))}return e}({onClick:y?void 0:t,onContextMenu:y?void 0:o,className:a()(l,(n={},c(n,s().button,!0),c(n,s().selected,d),c(n,s().disabled,y),c(n,s().dangerous,v),n))},b),{children:m}))}const m=function(e){var n=e.className,t=e.children;return(0,r.jsx)("div",{className:a()(n,s().wrapper),children:t})}}}]);
//# sourceMappingURL=db74ffef42d75bbd8e8c.js.map